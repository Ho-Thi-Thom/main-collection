(()=>{function C(e,o){try{return JSON.parse(e.textContent)}catch(t){return console.log(t),o}}function w(e="",o={},t){let n=new URLSearchParams(o);return t&&typeof t=="function"&&t(n),e?e+"?"+n.toString():window.location.pathname+"?"+n.toString()}function A(e,o){let t=new URLSearchParams(o);return e&&typeof e=="function"&&e(t),window.location.pathname+"?"+t.toString()}function E(e,o){return e+=e.includes("?")?"&":"?",e+=`section_id=${o}`}function k(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e){let o=document.querySelector("#popup-info"),t=document.querySelector("#popup-info .title"),n=document.querySelector("#popup-info .wrapper-content"),{type:c,title:a,textContent:u}=e;t.setAttribute("data-type",c),t.innerHTML=a.trim(),n.innerHTML=u.trim(),o.classList.add("active"),x(O,1e3)()}function O(){document.querySelector("#popup-info").classList.remove("active")}function x(e,o){var t=null;return function(){clearTimeout(t);var n=arguments,c=this;t=setTimeout(function(){e.apply(c,n)},o)}}function I(e){fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o=>{switch(o.status){case 200:o.json().then(t=>{let n={type:"success",title:"Add to Cart",textContent:`Add success "${t.items[0].product_title}"`};U(),b(n)});break;case 404:break;case 422:o.json().then(t=>{let n={type:"error",title:"422",textContent:t.description};b(n)});break;default:break}}).catch(o=>{console.log("Error:",o)})}async function N(){try{return(await(await fetch(window.Shopify.routes.root+"cart.js")).json()).item_count}catch(e){return e}}async function U(){try{let e=await N(),o=document.querySelector(".jsCountItemCart");o.textContent=e}catch(e){console.error(e)}}function L(){let e=null,o=null,t=null,n=null,c=()=>{e&&e.destroy(),o&&o.destroy();let l=n?"horizontal":"vertical",i=document.querySelector("#customize"),s=document.querySelector("#customize-thumbnails");return e=tns({container:i,navContainer:s||void 0,controlsContainer:"#controls",items:1,axis:"horizontal",autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,nav:!0}),s&&(o=tns({container:s,items:3,axis:l,autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,controlsContainer:"#customize-controls",nav:!1}),e.events.on("indexChanged",function(p){o.goTo(p.index)})),e},a=x(()=>{let l=window.matchMedia("(max-width: 1023px)").matches;n!==null&&n!==l&&(n=l,c())},500),u=()=>{t&&t.disconnect();let l=document.querySelector("#customize");t=new ResizeObserver(a),t.observe(l)},m=()=>{t&&(t.disconnect(),t=null)};return(()=>{n=window.matchMedia("(max-width: 1023px)").matches,c(),u(),window.addEventListener("resize",a)})(),{slider:e,cleanup:m}}function F(e,o,t=!1){if(t)return;let n=document.querySelector(".compare-price"),c=document.querySelector(".price");n.parentNode.replaceChild(e,n),c.parentNode.replaceChild(o,c)}function M(e,o=!1){if(o)return;let t=document.querySelector(".variant-inventory");t.parentNode.replaceChild(e,t)}function P(e,o=!1){let t=document.querySelector(".btn-add");if(o){t.setAttribute("disabled","");let n=t.querySelector("span");t.setAttribute("data-selected-quantity",0),n.textContent="Not Available";return}if(t&&e){let n=t.querySelector("span"),c=e.querySelector("span");n&&c&&n.parentNode.replaceChild(c,n);let a=e.getAttribute("data-selected-quantity");a&&t.setAttribute("data-selected-quantity",a),parseInt(a)===0?t.setAttribute("disabled","true"):document.querySelector(".cart__condition").classList.contains("checked")&&t.removeAttribute("disabled")}}function B(e,o=!1){if(o)return;let t=document.querySelector(".product-sku");t.parentNode.replaceChild(e,t)}function R(e,o=!1){if(o)return;let t=document.querySelector(".jsSubmit");t.value=e.value}function j(e){let o=e();o?fetch(o).then(t=>t.text()).then(t=>{let n=document.createElement("div");n.innerHTML=t,F(n.querySelector(".compare-price"),n.querySelector(".price")),M(n.querySelector(".variant-inventory")),P(n.querySelector(".btn-add")),B(n.querySelector(".product-sku")),R(n.querySelector(".jsSubmit"))}):(P(null,!0),b({type:"warring",title:"Not found",textContent:"Variant does not exist"}))}function T(e,o,t){t=k(t);let n=o.filter(i=>i.name!==t).map(i=>i.position),c=o.find(i=>i.name===t),a=c?c.position:null,m=[...new Set(e)].reduce((i,s)=>(s.split(" / ").filter((d,r)=>r!==a-1).forEach((d,r)=>{i[r]||(i[r]=[]),i[r].includes(d)||i[r].push(d)}),i),[]),g=n.map((i,s)=>[i,m[s]]),l=document.querySelectorAll(".check-position");g.forEach(i=>{l.forEach(s=>{if(i[0]==s.dataset.position){let p=s.querySelectorAll('input[type="radio"]'),S=s.querySelectorAll("option");Array.from(p).concat(Array.from(S)).forEach(d=>{let r=d.value;i[1].includes(r)?d.setAttribute("data-disabled","false"):d.setAttribute("data-disabled","true")})}})})}function _(e,o){let t=[];return e&&e.forEach(n=>{n.querySelectorAll("option").forEach(a=>{let u=a.value;a.selected&&t.push(u)})}),o&&o.forEach(n=>{let c=n.value;n.checked&&t.push(c)}),t}function D(){document.getElementById("cart-condition").addEventListener("click",function(o){let t=document.querySelector(".cart__condition"),n=document.querySelector("button[name='add']");if(this.checked){t.classList.add("checked");let c=n.getAttribute("data-selected-quantity");parseInt(c)!==0&&n.removeAttribute("disabled")}else t.classList.remove("checked"),n.setAttribute("disabled","")})}function J(e=null,o=document,t){let n=o.querySelector(".jsProductForm"),c=C(o.querySelector("#popup_product_options"),[]),u=C(o.querySelector("#popup-variants"),[]).variants,{slider:m,cleanup:g}=t(),l=o.querySelector(".remove__qlt"),i=o.querySelector(".add__qlt"),s=o.querySelector(".quantity__input"),p=o.querySelector("#jsFormProduct");n.addEventListener("change",function(r){if(console.log("\u1EA5dsds"),r.target.id!=="cart-condition"){let v=u.filter(f=>Object.values(f).includes(r.target.value)).map(f=>f.title);j(()=>S(n.dataset.sectionId,m)),T(v,c,r.target.name)}});function S(r,v){let f=o.querySelectorAll(".js-variant-change"),V=o.querySelectorAll(".js-radio"),z=_(f,V),y=u.find(h=>h.options.join("/")==z.join("/"));if(!y)return;y.featured_image!==null&&v.goTo(y.featured_image.position-1);let q="";return e?q=w(e,void 0,function(h){h.set("variant",y.id)}):(q=A(function(h){h.set("variant",y.id)}),history.pushState(null,null,q)),E(q,r)}l.addEventListener("click",function(){let r=parseInt(s.value);r>1&&(s.value=r-1)}),i.addEventListener("click",function(){let r=parseInt(s.value);s.value=r+1}),s.addEventListener("keydown",function(r){r.key==="Enter"&&r.preventDefault()}),d(),D();function d(){p&&p.dataset.type==="b"&&p.addEventListener("submit",function(r){r.preventDefault();let f={items:[Object.fromEntries(new FormData(r.target).entries())]};I(f)})}}function W(e,o){J(e,o,L)}})();
