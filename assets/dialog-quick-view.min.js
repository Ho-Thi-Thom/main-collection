(()=>{function q(e,n){try{return JSON.parse(e.textContent)}catch(t){return console.log(t),n}}function C(e="",n={},t){let o=new URLSearchParams(n);return t&&typeof t=="function"&&t(o),e?e+"?"+o.toString():window.location.pathname+"?"+o.toString()}function x(e,n){let t=new URLSearchParams(n);return e&&typeof e=="function"&&e(t),window.location.pathname+"?"+t.toString()}function w(e,n){return e+=e.includes("?")?"&":"?",e+=`section_id=${n}`}function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}function g(e){let n=document.querySelector("#popup-info"),t=document.querySelector("#popup-info .title"),o=document.querySelector("#popup-info .wrapper-content"),{type:r,title:a,textContent:p}=e;t.setAttribute("data-type",r),t.innerHTML=a.trim(),o.innerHTML=p.trim(),n.classList.add("active"),b(D,1e3)()}function D(){document.querySelector("#popup-info").classList.remove("active")}function b(e,n){var t=null;return function(){clearTimeout(t);var o=arguments,r=this;t=setTimeout(function(){e.apply(r,o)},n)}}function A(e){fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>{switch(n.status){case 200:n.json().then(t=>{let o={type:"success",title:"Add to Cart",textContent:`Add success "${t.items[0].product_title}"`};V(),g(o)});break;case 404:break;case 422:n.json().then(t=>{let o={type:"error",title:"422",textContent:t.description};g(o)});break;default:break}}).catch(n=>{console.log("Error:",n)})}async function O(){try{return(await(await fetch(window.Shopify.routes.root+"cart.js")).json()).item_count}catch(e){return e}}async function V(){try{let e=await O(),n=document.querySelector(".jsCountItemCart");n.textContent=e}catch(e){console.error(e)}}function I(){let e=null,n=null,t=null,o=null,r=()=>{e&&e.destroy(),n&&n.destroy();let u=o?"horizontal":"vertical",c=document.querySelector("#customize"),l=document.querySelector("#customize-thumbnails");return e=tns({container:c,navContainer:l||void 0,controlsContainer:"#controls",items:1,axis:"horizontal",autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,nav:!0}),l&&(n=tns({container:l,items:3,axis:u,autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,controlsContainer:"#customize-controls",nav:!1}),e.events.on("indexChanged",function(m){n.goTo(m.index)})),e},a=b(()=>{let u=window.matchMedia("(max-width: 1023px)").matches;o!==null&&o!==u&&(o=u,r())},500),p=()=>{t&&t.disconnect();let u=document.querySelector("#customize");t=new ResizeObserver(a),t.observe(u)},f=()=>{t&&(t.disconnect(),t=null)};return(()=>{o=window.matchMedia("(max-width: 1023px)").matches,r(),p(),window.addEventListener("resize",a)})(),{slider:e,cleanup:f}}function N(e,n,t=!1){if(t)return;let o=document.querySelector(".compare-price"),r=document.querySelector(".price");o.parentNode.replaceChild(e,o),r.parentNode.replaceChild(n,r)}function U(e,n=!1){if(n)return;let t=document.querySelector(".variant-inventory");t.parentNode.replaceChild(e,t)}function k(e,n=!1){let t=document.querySelector(".btn-add");if(n){t.setAttribute("disabled","");let o=t.querySelector("span");t.setAttribute("data-selected-quantity",0),o.textContent="Not Available";return}if(t&&e){let o=t.querySelector("span"),r=e.querySelector("span");o&&r&&o.parentNode.replaceChild(r,o);let a=e.getAttribute("data-selected-quantity");a&&t.setAttribute("data-selected-quantity",a),parseInt(a)===0?t.setAttribute("disabled","true"):document.querySelector(".cart__condition").classList.contains("checked")&&t.removeAttribute("disabled")}}function B(e,n=!1){if(n)return;let t=document.querySelector(".product-sku");t.parentNode.replaceChild(e,t)}function F(e,n=!1){if(n)return;let t=document.querySelector(".jsSubmit");t.value=e.value}function L(e){let n=e();console.log(n),n?fetch(n).then(t=>t.text()).then(t=>{let o=document.createElement("div");o.innerHTML=t,console.log(o),N(o.querySelector(".compare-price"),o.querySelector(".price")),U(o.querySelector(".variant-inventory")),k(o.querySelector(".btn-add")),B(o.querySelector(".product-sku")),F(o.querySelector(".jsSubmit"))}):(k(null,!0),g({type:"warring",title:"Not found",textContent:"Variant does not exist"}))}function P(e,n,t){t=E(t);let o=n.filter(c=>c.name!==t).map(c=>c.position),r=n.find(c=>c.name===t),a=r?r.position:null,f=[...new Set(e)].reduce((c,l)=>(l.split(" / ").filter((d,s)=>s!==a-1).forEach((d,s)=>{c[s]||(c[s]=[]),c[s].includes(d)||c[s].push(d)}),c),[]),S=o.map((c,l)=>[c,f[l]]),u=document.querySelectorAll(".check-position");S.forEach(c=>{u.forEach(l=>{if(c[0]==l.dataset.position){let m=l.querySelectorAll('input[type="radio"]'),i=l.querySelectorAll("option");Array.from(m).concat(Array.from(i)).forEach(d=>{let s=d.value;c[1].includes(s)?d.setAttribute("data-disabled","false"):d.setAttribute("data-disabled","true")})}})})}function T(e,n){let t=[];return e&&e.forEach(o=>{o.querySelectorAll("option").forEach(a=>{let p=a.value;a.selected&&t.push(p)})}),n&&n.forEach(o=>{let r=o.value;o.checked&&t.push(r)}),t}function _(){document.getElementById("cart-condition").addEventListener("click",function(n){let t=document.querySelector(".cart__condition"),o=document.querySelector("button[name='add']");if(this.checked){t.classList.add("checked");let r=o.getAttribute("data-selected-quantity");parseInt(r)!==0&&o.removeAttribute("disabled")}else t.classList.remove("checked"),o.setAttribute("disabled","")})}function K(e=null){let n=document.querySelector(".jsProductForm"),t=q(document.getElementById("popup_product_options"),[]),r=q(document.getElementById("popup-variants"),[]).variants,{slider:a,cleanup:p}=I(),f=document.querySelector(".remove__qlt"),S=document.querySelector(".add__qlt"),u=document.querySelector(".quantity__input"),c=document.getElementById("jsFormProduct");n.addEventListener("change",function(i){if(i.target.id!=="cart-condition"){let d=r.filter(s=>Object.values(s).includes(i.target.value)).map(s=>s.title);L(()=>l(n.dataset.sectionId,a)),P(d,t,i.target.name)}});function l(i,d){let s=document.querySelectorAll(".js-variant-change"),j=document.querySelectorAll(".js-radio"),z=T(s,j),y=r.find(h=>h.options.join("/")==z.join("/"));if(!y)return;y.featured_image!==null&&d.goTo(y.featured_image.position-1);let v="";return e?v=C(e,void 0,function(h){h.set("variant",y.id)}):(v=x(function(h){h.set("variant",y.id)}),history.pushState(null,null,v)),w(v,i)}f.addEventListener("click",function(){let i=parseInt(u.value);i>1&&(u.value=i-1)}),S.addEventListener("click",function(){let i=parseInt(u.value);u.value=i+1}),u.addEventListener("keydown",function(i){i.key==="Enter"&&i.preventDefault()}),m(),_();function m(){c&&c.dataset.type==="b"&&c.addEventListener("submit",function(i){i.preventDefault();let s={items:[Object.fromEntries(new FormData(i.target).entries())]};A(s)})}}})();
