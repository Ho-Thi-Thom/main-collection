(()=>{function h(t,n){try{return JSON.parse(t.textContent)}catch(e){return console.log(e),n}}function g(t,n){let e=new URLSearchParams(n);return t&&typeof t=="function"&&t(e),window.location.pathname+"?"+e.toString()}function C(t,n){return t+=t.includes("?")?"&":"?",t+=`section_id=${n}`}function x(t){return t.charAt(0).toUpperCase()+t.slice(1)}function y(t){let n=document.querySelector("#popup-info"),e=document.querySelector("#popup-info .title"),o=document.querySelector("#popup-info .wrapper-content"),{type:r,title:c,textContent:s}=t;e.setAttribute("data-type",r),e.innerHTML=c.trim(),o.innerHTML=s.trim(),n.classList.add("active"),S(j,1e3)()}function j(){document.querySelector("#popup-info").classList.remove("active")}function S(t,n){var e=null;return function(){clearTimeout(e);var o=arguments,r=this;e=setTimeout(function(){t.apply(r,o)},n)}}function w(t){fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(n=>{switch(n.status){case 200:n.json().then(e=>{let o={type:"success",title:"Add to Cart",textContent:`Add success "${e.items[0].product_title}"`};O(),y(o)});break;case 404:break;case 422:n.json().then(e=>{let o={type:"error",title:"422",textContent:e.description};y(o)});break;default:break}}).catch(n=>{console.log("Error:",n)})}async function z(){try{return(await(await fetch(window.Shopify.routes.root+"cart.js")).json()).item_count}catch(t){return t}}async function O(){try{let t=await z(),n=document.querySelector(".jsCountItemCart");n.textContent=t}catch(t){console.error(t)}}function E(){let t=null,n=null,e=null,o=null,r=()=>{t&&t.destroy(),n&&n.destroy();let l=o?"horizontal":"vertical",i=document.querySelector("#customize"),a=document.querySelector("#customize-thumbnails");return t=tns({container:i,navContainer:a||void 0,controlsContainer:"#controls",items:1,axis:"horizontal",autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,nav:!0}),a&&(n=tns({container:a,items:3,axis:l,autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,controlsContainer:"#customize-controls",nav:!1}),t.events.on("indexChanged",function(m){n.goTo(m.index)})),t},c=S(()=>{let l=window.matchMedia("(max-width: 1023px)").matches;o!==null&&o!==l&&(o=l,r())},500),s=()=>{e&&e.disconnect();let l=document.querySelector("#customize");e=new ResizeObserver(c),e.observe(l)},u=()=>{e&&(e.disconnect(),e=null)};return(()=>{o=window.matchMedia("(max-width: 1023px)").matches,r(),s(),window.addEventListener("resize",c)})(),{slider:t,cleanup:u}}function D(t,n,e=!1){if(e)return;let o=document.querySelector(".compare-price"),r=document.querySelector(".price");o.parentNode.replaceChild(t,o),r.parentNode.replaceChild(n,r)}function N(t,n=!1){if(n)return;let e=document.querySelector(".variant-inventory");e.parentNode.replaceChild(t,e)}function A(t,n=!1){let e=document.querySelector(".btn-add");if(n){e.setAttribute("disabled","");let o=e.querySelector("span");e.setAttribute("data-selected-quantity",0),o.textContent="Not Available";return}if(e&&t){let o=e.querySelector("span"),r=t.querySelector("span");o&&r&&o.parentNode.replaceChild(r,o);let c=t.getAttribute("data-selected-quantity");c&&e.setAttribute("data-selected-quantity",c),parseInt(c)===0?e.setAttribute("disabled","true"):document.querySelector(".cart__condition").classList.contains("checked")&&e.removeAttribute("disabled")}}function V(t,n=!1){if(n)return;let e=document.querySelector(".product-sku");e.parentNode.replaceChild(t,e)}function U(t,n=!1){if(n)return;let e=document.querySelector(".jsSubmit");e.value=t.value}function I(t){let n=t();n?fetch(n).then(e=>e.text()).then(e=>{let o=document.createElement("div");o.innerHTML=e,D(o.querySelector(".compare-price"),o.querySelector(".price")),N(o.querySelector(".variant-inventory")),A(o.querySelector(".btn-add")),V(o.querySelector(".product-sku")),U(o.querySelector(".jsSubmit"))}):(A(null,!0),y({type:"warring",title:"Not found",textContent:"Variant does not exist"}))}function k(t,n,e){e=x(e);let o=n.filter(i=>i.name!==e).map(i=>i.position),r=n.find(i=>i.name===e),c=r?r.position:null,u=[...new Set(t)].reduce((i,a)=>(a.split(" / ").filter((p,d)=>d!==c-1).forEach((p,d)=>{i[d]||(i[d]=[]),i[d].includes(p)||i[d].push(p)}),i),[]),q=o.map((i,a)=>[i,u[a]]),l=document.querySelectorAll(".check-position");q.forEach(i=>{l.forEach(a=>{if(i[0]==a.dataset.position){let m=a.querySelectorAll('input[type="radio"]'),b=a.querySelectorAll("option");Array.from(m).concat(Array.from(b)).forEach(p=>{let d=p.value;i[1].includes(d)?p.setAttribute("data-disabled","false"):p.setAttribute("data-disabled","true")})}})})}function L(t,n){let e=[];return t&&t.forEach(o=>{o.querySelectorAll("option").forEach(c=>{let s=c.value;c.selected&&e.push(s)})}),n&&n.forEach(o=>{let r=o.value;o.checked&&e.push(r)}),e}function P(){document.getElementById("cart-condition").addEventListener("click",function(n){let e=document.querySelector(".cart__condition"),o=document.querySelector("button[name='add']");if(this.checked){e.classList.add("checked");let r=o.getAttribute("data-selected-quantity");parseInt(r)!==0&&o.removeAttribute("disabled")}else e.classList.remove("checked"),o.setAttribute("disabled","")})}var T=document.querySelector(".jsProductForm"),B=h(document.getElementById("popup_product_options"),[]),F=h(document.getElementById("popup-variants"),[]),_=F.variants,{slider:M,cleanup:Z}=E(),R=document.querySelector(".remove__qlt"),J=document.querySelector(".add__qlt"),f=document.querySelector(".quantity__input"),v=document.getElementById("jsFormProduct");T.addEventListener("change",function(t){if(t.target.id!=="cart-condition"){let n=_.filter(e=>Object.values(e).includes(t.target.value)).map(e=>e.title);I(()=>H(T.dataset.sectionId,M)),k(n,B,t.target.name)}});function H(t,n){let e=document.querySelectorAll(".js-variant-change"),o=document.querySelectorAll(".js-radio"),r=L(e,o),c=_.find(u=>u.options.join("/")==r.join("/"));if(!c)return;c.featured_image!==null&&n.goTo(c.featured_image.position-1);let s=g(function(u){u.set("variant",c.id)});return history.pushState(null,null,s),C(s,t)}R.addEventListener("click",function(){let t=parseInt(f.value);t>1&&(f.value=t-1)});J.addEventListener("click",function(){let t=parseInt(f.value);f.value=t+1});f.addEventListener("keydown",function(t){t.key==="Enter"&&t.preventDefault()});Q();P();function Q(){v&&v.dataset.type==="b"&&v.addEventListener("submit",function(t){t.preventDefault();let e={items:[Object.fromEntries(new FormData(t.target).entries())]};w(e)})}})();
