(()=>{var L=document.querySelectorAll(".js-variant-change"),_=document.querySelectorAll('input[type="radio"]'),k=JSON.parse(document.getElementById("product_data").textContent),g=JSON.parse(document.getElementById("product_options").textContent),v=k.variants,h=document.querySelector(".wish-list"),I=t=>{let e="recently-list",c=()=>{try{let s=window.localStorage.getItem(e);return s?JSON.parse(s):[]}catch(s){return console.log(s),[]}};(()=>{let s=c(),n=s.findIndex(a=>a===t);n>-1&&s.splice(n,1),s.unshift(t),window.localStorage.setItem(e,JSON.stringify(s))})()};window.recentlyTrigger=I;var b=t=>{let e="wish-list",c=()=>{try{let n=window.localStorage.getItem(e);return n?JSON.parse(n):[]}catch(n){console.log(n)}},o=()=>{c().findIndex(f=>f===t)!==-1&&h.classList.add("active")},s=()=>{let n=c(),a=n.findIndex(f=>f===t);a!==-1?(n.splice(a,1),h.classList.remove("active")):(n.push(t),h.classList.add("active")),window.localStorage.setItem(e,JSON.stringify(n))};o(),h.addEventListener("click",function(){s()})};window.productTrigger=b;function C(t){let e=new URLSearchParams;return t(e),window.location.pathname+"?"+e.toString()}function A(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function j(t,e){let c=document.querySelector(".compare-price"),o=document.querySelector(".price");c.parentNode.replaceChild(t,c),o.parentNode.replaceChild(e,o)}function N(t){let e=document.querySelector(".variant-inventory");e.parentNode.replaceChild(t,e)}function P(t){let e=document.querySelector(".product-sku");e.parentNode.replaceChild(t,e)}function O(t){let e=document.querySelector(".btn-add");e.parentNode.replaceChild(t,e)}function T(t,e){let c=J(),o=x(c);if(o!=null){let n=function(l){l.set("variant",o.id)};var s=n;mainSlider.goTo(o.featured_image.position-1);let a=C(n);history.pushState(null,null,a);let f=A(a,t);fetch(f).then(l=>l.text()).then(l=>{let i=document.createElement("div");i.innerHTML=l,j(i.querySelector(".compare-price"),i.querySelector(".price")),N(i.querySelector(".variant-inventory")),O(i.querySelector(".btn-add")),P(i.querySelector(".product-sku"))})}else console.log(c)}function D(t,e){e=e.charAt(0).toUpperCase()+e.slice(1);let c=v.filter(r=>Object.values(r).includes(t)),o=g.filter(r=>r.name!==e).map(r=>r.position),s=c.map(r=>r.title),n=g.find(r=>r.name===e),a=n?n.position:null,l=[...new Set(s)].reduce((r,d)=>(d.split(" / ").filter((p,u)=>u!==a-1).forEach((p,u)=>{r[u]||(r[u]=[]),r[u].includes(p)||r[u].push(p)}),r),[]),i=o.map((r,d)=>[r,l[d]]),q=document.querySelectorAll(".check-position");i.forEach(r=>{q.forEach(d=>{if(r[0]==d.dataset.position){let m=d.querySelectorAll('input[type="radio"]'),S=d.querySelectorAll("option");Array.from(m).concat(Array.from(S)).forEach(p=>{let u=p.value;r[1].includes(u)?p.setAttribute("data-disabled","false"):p.setAttribute("data-disabled","true")})}})})}var w=document.querySelector(".jsProductForm");w.addEventListener("change",t=>{T(w.dataset.sectionId,t),D(t.target.value,t.target.name)});function x(t){return v.find(e=>e.options.join("/")==t.join("/"))}function J(){let t=[];return L.forEach(e=>{e.querySelectorAll("option").forEach(o=>{let s=o.value;o.selected&&t.push(s)})}),_.forEach(e=>{let c=e.value;e.checked&&t.push(c)}),t}var V=document.querySelector(".remove__qlt"),B=document.querySelector(".add__qlt"),y=document.querySelector(".quantity__input");V.addEventListener("click",function(){let t=parseInt(y.value);t>1&&(y.value=t-1)});B.addEventListener("click",function(){let t=parseInt(y.value);y.value=t+1});y.addEventListener("keydown",function(t){t.key==="Enter"&&t.preventDefault()});var E=document.getElementById("jsFormProduct");E.dataset.type=="b"&&E.addEventListener("submit",async function(t){t.preventDefault();let c={items:[Object.fromEntries(new FormData(t.target).entries())]};fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(async o=>{switch(o.status){case 200:let s=await o.json();alert("More product success:",s.items[0].product_title);break;case 404:break;case 422:let n=await o.json();alert(n.description);break;default:break}}).catch(o=>{console.log("Error:",o)})});})();
