(()=>{var L=document.querySelectorAll(".js-variant-change"),w=document.querySelectorAll('input[type="radio"]'),_=JSON.parse(document.getElementById("product_data").textContent),S=JSON.parse(document.getElementById("product_options").textContent),g=_.variants,m=document.querySelector(".wish-list"),k=e=>{let t="wish-list",c=()=>{try{let o=window.localStorage.getItem(t);return o?JSON.parse(o):[]}catch(o){console.log(o)}},r=()=>{c().findIndex(p=>p===e)!==-1&&m.classList.add("active")},f=()=>{let o=c(),i=o.findIndex(p=>p===e);i!==-1?(o.splice(i,1),m.classList.remove("active")):(o.push(e),m.classList.add("active")),window.localStorage.setItem(t,JSON.stringify(o))};r(),m.addEventListener("click",function(){f()})};window.productTrigger=k;function A(e){let t=new URLSearchParams;return e(t),window.location.pathname+"?"+t.toString()}function I(e,t){return e+=e.includes("?")?"&":"?",e+=`section_id=${t}`}function C(e,t){let c=document.querySelector(".compare-price"),r=document.querySelector(".price");c.parentNode.replaceChild(e,c),r.parentNode.replaceChild(t,r)}function P(e){let t=document.querySelector(".variant-inventory");t.parentNode.replaceChild(e,t)}function N(e){let t=document.querySelector(".product-sku");t.parentNode.replaceChild(e,t)}function b(e){let t=document.querySelector(".btn-add");t.parentNode.replaceChild(e,t)}function O(e,t){let c=j(),r=V(c);if(r!=null){let o=function(l){l.set("variant",r.id)};var f=o;mainSlider.goTo(r.featured_image.position-1);let i=A(o);history.pushState(null,null,i);let p=I(i,e);fetch(p).then(l=>l.text()).then(l=>{let s=document.createElement("div");s.innerHTML=l,C(s.querySelector(".compare-price"),s.querySelector(".price")),P(s.querySelector(".variant-inventory")),b(s.querySelector(".btn-add")),N(s.querySelector(".product-sku"))})}else console.log(c)}function T(e,t){t=t.charAt(0).toUpperCase()+t.slice(1);let c=g.filter(n=>Object.values(n).includes(e)),r=S.filter(n=>n.name!==t).map(n=>n.position),f=c.map(n=>n.title),o=S.find(n=>n.name===t),i=o?o.position:null,l=[...new Set(f)].reduce((n,u)=>(u.split(" / ").filter((d,a)=>a!==i-1).forEach((d,a)=>{n[a]||(n[a]=[]),n[a].includes(d)||n[a].push(d)}),n),[]),s=r.map((n,u)=>[n,l[u]]),E=document.querySelectorAll(".check-position");s.forEach(n=>{E.forEach(u=>{if(n[0]==u.dataset.position){let y=u.querySelectorAll('input[type="radio"]'),v=u.querySelectorAll("option");Array.from(y).concat(Array.from(v)).forEach(d=>{let a=d.value;n[1].includes(a)?d.setAttribute("data-disabled","false"):d.setAttribute("data-disabled","true")})}})})}var q=document.querySelector(".jsProductForm");q.addEventListener("change",e=>{O(q.dataset.sectionId,e),T(e.target.value,e.target.name)});function V(e){return g.find(t=>t.options.join("/")==e.join("/"))}function j(){let e=[];return L.forEach(t=>{t.querySelectorAll("option").forEach(r=>{let f=r.value;r.selected&&e.push(f)})}),w.forEach(t=>{let c=t.value;t.checked&&e.push(c)}),e}var x=document.querySelector(".remove__qlt"),U=document.querySelector(".add__qlt"),h=document.querySelector(".quantity__input");x.addEventListener("click",function(){let e=parseInt(h.value);e>1&&(h.value=e-1)});U.addEventListener("click",function(){let e=parseInt(h.value);h.value=e+1});h.addEventListener("keydown",function(e){e.key==="Enter"&&e.preventDefault()});})();
