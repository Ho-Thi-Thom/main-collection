(()=>{var w=document.querySelectorAll(".js-variant-change"),L=document.querySelectorAll('input[type="radio"]'),I=JSON.parse(document.getElementById("product_data").textContent),g=JSON.parse(document.getElementById("product_options").textContent),v=I.variants,y=document.querySelector(".wish-list"),_=e=>{let t="recently-list",r=()=>{try{let i=window.localStorage.getItem(t);return i?JSON.parse(i):[]}catch(i){return console.log(i),[]}};(()=>{let i=r(),n=i.findIndex(s=>s===e);n>-1&&i.splice(n,1),i.unshift(e),window.localStorage.setItem(t,JSON.stringify(i))})()};window.recentlyTrigger=_;var k=e=>{let t="wish-list",r=()=>{try{let n=window.localStorage.getItem(t);return n?JSON.parse(n):[]}catch(n){console.log(n)}},c=()=>{r().findIndex(f=>f===e)!==-1&&y.classList.add("active")},i=()=>{let n=r(),s=n.findIndex(f=>f===e);s!==-1?(n.splice(s,1),y.classList.remove("active")):(n.push(e),y.classList.add("active")),window.localStorage.setItem(t,JSON.stringify(n))};c(),y.addEventListener("click",function(){i()})};window.productTrigger=k;function A(e){let t=new URLSearchParams;return e(t),window.location.pathname+"?"+t.toString()}function C(e,t){return e+=e.includes("?")?"&":"?",e+=`section_id=${t}`}function N(e,t){let r=document.querySelector(".compare-price"),c=document.querySelector(".price");r.parentNode.replaceChild(e,r),c.parentNode.replaceChild(t,c)}function P(e){let t=document.querySelector(".variant-inventory");t.parentNode.replaceChild(e,t)}function T(e){let t=document.querySelector(".product-sku");t.parentNode.replaceChild(e,t)}function O(e){let t=document.querySelector(".btn-add");t.parentNode.replaceChild(e,t)}function b(e,t){let r=V(),c=J(r);if(c!=null){let n=function(u){u.set("variant",c.id)};var i=n;mainSlider.goTo(c.featured_image.position-1);let s=A(n);history.pushState(null,null,s);let f=C(s,e);fetch(f).then(u=>u.text()).then(u=>{let a=document.createElement("div");a.innerHTML=u,N(a.querySelector(".compare-price"),a.querySelector(".price")),P(a.querySelector(".variant-inventory")),O(a.querySelector(".btn-add")),T(a.querySelector(".product-sku"))})}else console.log(r)}function x(e,t){t=t.charAt(0).toUpperCase()+t.slice(1);let r=v.filter(o=>Object.values(o).includes(e)),c=g.filter(o=>o.name!==t).map(o=>o.position),i=r.map(o=>o.title),n=g.find(o=>o.name===t),s=n?n.position:null,u=[...new Set(i)].reduce((o,d)=>(d.split(" / ").filter((p,l)=>l!==s-1).forEach((p,l)=>{o[l]||(o[l]=[]),o[l].includes(p)||o[l].push(p)}),o),[]),a=c.map((o,d)=>[o,u[d]]),E=document.querySelectorAll(".check-position");a.forEach(o=>{E.forEach(d=>{if(o[0]==d.dataset.position){let m=d.querySelectorAll('input[type="radio"]'),S=d.querySelectorAll("option");Array.from(m).concat(Array.from(S)).forEach(p=>{let l=p.value;o[1].includes(l)?p.setAttribute("data-disabled","false"):p.setAttribute("data-disabled","true")})}})})}var q=document.querySelector(".jsProductForm");q.addEventListener("change",e=>{b(q.dataset.sectionId,e),x(e.target.value,e.target.name)});function J(e){return v.find(t=>t.options.join("/")==e.join("/"))}function V(){let e=[];return w.forEach(t=>{t.querySelectorAll("option").forEach(c=>{let i=c.value;c.selected&&e.push(i)})}),L.forEach(t=>{let r=t.value;t.checked&&e.push(r)}),e}var j=document.querySelector(".remove__qlt"),R=document.querySelector(".add__qlt"),h=document.querySelector(".quantity__input");j.addEventListener("click",function(){let e=parseInt(h.value);e>1&&(h.value=e-1)});R.addEventListener("click",function(){let e=parseInt(h.value);h.value=e+1});h.addEventListener("keydown",function(e){e.key==="Enter"&&e.preventDefault()});})();
