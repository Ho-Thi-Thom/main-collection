(()=>{var L=document.querySelectorAll(".js-variant-change"),k=document.querySelectorAll('input[type="radio"]'),I=JSON.parse(document.getElementById("product_data").textContent),g=JSON.parse(document.getElementById("product_options").textContent),v=I.variants,m=document.querySelector(".wish-list"),_=t=>{let e="recently-list",s=()=>{try{let c=window.localStorage.getItem(e);return c?JSON.parse(c):[]}catch(c){return console.log(c),[]}};(()=>{let c=s(),n=c.findIndex(u=>u===t);n>-1&&c.splice(n,1),c.unshift(t);let a=c.length>11?c.slice(0,10):c;window.localStorage.setItem(e,JSON.stringify(a))})()};window.recentlyTrigger=_;var b=t=>{let e="wish-list",s=()=>{try{let n=window.localStorage.getItem(e);return n?JSON.parse(n):[]}catch(n){console.log(n)}},o=()=>{s().findIndex(u=>u===t)!==-1&&m.classList.add("active")},c=()=>{let n=s(),a=n.findIndex(u=>u===t);a!==-1?(n.splice(a,1),m.classList.remove("active")):(n.push(t),m.classList.add("active")),window.localStorage.setItem(e,JSON.stringify(n))};o(),m.addEventListener("click",function(){c()})};window.productTrigger=b;function C(t){let e=new URLSearchParams;return t(e),window.location.pathname+"?"+e.toString()}function j(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function P(t,e){let s=document.querySelector(".compare-price"),o=document.querySelector(".price");s.parentNode.replaceChild(t,s),o.parentNode.replaceChild(e,o)}function A(t){let e=document.querySelector(".variant-inventory");e.parentNode.replaceChild(t,e)}function N(t){let e=document.querySelector(".product-sku");e.parentNode.replaceChild(t,e)}function O(t){let e=document.querySelector(".btn-add");e.parentNode.replaceChild(t,e)}function T(t){let e=document.querySelector(".jsSubmit");e.value=t.value}function D(t,e){let s=V(),o=J(s);if(o!=null){let n=function(d){d.set("variant",o.id)};var c=n;mainSlider.goTo(o.featured_image.position-1);let a=C(n);history.pushState(null,null,a);let u=j(a,t);fetch(u).then(d=>d.text()).then(d=>{let i=document.createElement("div");i.innerHTML=d,P(i.querySelector(".compare-price"),i.querySelector(".price")),A(i.querySelector(".variant-inventory")),O(i.querySelector(".btn-add")),N(i.querySelector(".product-sku")),T(i.querySelector(".jsSubmit"))})}else console.log(s)}function x(t,e){e=e.charAt(0).toUpperCase()+e.slice(1);let s=v.filter(r=>Object.values(r).includes(t)),o=g.filter(r=>r.name!==e).map(r=>r.position),c=s.map(r=>r.title),n=g.find(r=>r.name===e),a=n?n.position:null,d=[...new Set(c)].reduce((r,p)=>(p.split(" / ").filter((f,l)=>l!==a-1).forEach((f,l)=>{r[l]||(r[l]=[]),r[l].includes(f)||r[l].push(f)}),r),[]),i=o.map((r,p)=>[r,d[p]]),E=document.querySelectorAll(".check-position");i.forEach(r=>{E.forEach(p=>{if(r[0]==p.dataset.position){let h=p.querySelectorAll('input[type="radio"]'),S=p.querySelectorAll("option");Array.from(h).concat(Array.from(S)).forEach(f=>{let l=f.value;r[1].includes(l)?f.setAttribute("data-disabled","false"):f.setAttribute("data-disabled","true")})}})})}var w=document.querySelector(".jsProductForm");w.addEventListener("change",t=>{D(w.dataset.sectionId,t),x(t.target.value,t.target.name)});function J(t){return v.find(e=>e.options.join("/")==t.join("/"))}function V(){let t=[];return L.forEach(e=>{e.querySelectorAll("option").forEach(o=>{let c=o.value;o.selected&&t.push(c)})}),k.forEach(e=>{let s=e.value;e.checked&&t.push(s)}),t}var B=document.querySelector(".remove__qlt"),F=document.querySelector(".add__qlt"),y=document.querySelector(".quantity__input");B.addEventListener("click",function(){let t=parseInt(y.value);t>1&&(y.value=t-1)});F.addEventListener("click",function(){let t=parseInt(y.value);y.value=t+1});y.addEventListener("keydown",function(t){t.key==="Enter"&&t.preventDefault()});var q=document.getElementById("jsFormProduct");q.dataset.type=="b"&&q.addEventListener("submit",async function(t){t.preventDefault();let s={items:[Object.fromEntries(new FormData(t.target).entries())]};fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(async o=>{switch(o.status){case 200:document.querySelector(".jsCartPopup").classList.add("active");break;case 404:break;case 422:let n=await o.json();console.log("422",n.description);break;default:break}}).catch(o=>{console.log("Error:",o)})});})();
