(()=>{function q(){function i(t){t.innerHTML="Loading..."}function a(t){t.innerHTML=""}function g(t,e){let c=new URLSearchParams(e);return t(c),window.location.pathname+"?"+c.toString()}function r(t,e){let c=new URLSearchParams(e),m={};c.forEach(function(I,P){m[P]||(m[P]=[]),m[P].push(I)}),t(m);let U=new URLSearchParams;return Object.keys(m).forEach(I=>{m[I].forEach(P=>{U.append(I,P)})}),`${window.location.pathname}?${U.toString()}`}function o(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function s(t,e){return fetch(t,e).then(c=>c.text()).then(c=>A(c))}function l(t){let e=document.querySelector("#collection__products");t.querySelectorAll("#collection__products > *")?.forEach(c=>{e?.appendChild(c)})}function u(t){let e=document.querySelector("#collection__products");t&&(e.parentNode.replaceChild(t,e),e=t)}function n(t){let e=document.querySelector(".product_count");t&&e.parentNode.replaceChild(t,e)}function d(t){let e=document.querySelector(".collection__toolbar-filter-showing");t&&e.parentNode.replaceChild(t,e)}function p(t,e){let c=document.querySelector("#infinity_point");t&&(c.parentNode.replaceChild(t,c),e(t))}function f(t,e){let c=document.querySelector(".paginate");t&&(c.parentNode.replaceChild(t,c),e(document.querySelectorAll(".paginate_link[data-url]")))}function _(t,e){return fetch(t,e).then(c=>c.text()).then(c=>console.log(c))}function A(t){let e=document.createElement("div");return e.innerHTML=t,{getElementProduct(){return e.querySelector("#collection__products")},getProductCount(){return e.querySelector(".product_count")},getElementPointInfinity(){return e.querySelector("#infinity_point")},getPaginate(){return e.querySelector(".paginate")},getElementShowing(){return e.querySelector(".collection__toolbar-filter-showing")}}}return{loading:i,hiddenLoading:a,getApi:s,appendProduct:l,setProduct:u,updateCount:n,updateShowing:d,updatePointInfinity:p,createUrl:g,updatePaginate:f,createUrlFilter:r,updateUrl:o}}var{loading:T,createUrl:C,hiddenLoading:k,getApi:h,appendProduct:M,setProduct:S,updateCount:x,updateShowing:y,updatePointInfinity:E,updatePaginate:b,createUrlFilter:N,updateUrl:L}=q();function w(i){if(i){let a=new IntersectionObserver(g=>{g.forEach(r=>{if(r.isIntersecting){let o=r.target,s=o.dataset.url,l=o.dataset.sectionId;try{let n=s?C(function(d){d.set("section_id",l)},s.split("?")[1]):null;if(n==null){a.disconnect();return}T(o),h(n).then(d=>{let p=d.getElementPointInfinity();M(d.getElementProduct()),E(p,w),y(d.getElementShowing())}).finally(()=>{k(o)})}catch(u){console.error(u)}}})});a.observe(i)}}function F(i){i&&i.addEventListener("change",a=>{let g=a.target.value,r=a.target.dataset.sectionId;function o(l){l.set("sort_by",g)}let s=C(o,window.location.href.split("?")[1]);history.pushState(null,null,s),s=L(s,r),h(s).then(l=>{S(l.getElementProduct()),E(l.getElementPointInfinity(),w),y(l.getElementShowing())})})}function H(i){i&&i.addEventListener("change",a=>{let g=a.target.value,r=a.target.dataset.sectionId,o=`${window.Shopify.routes.root}cart/update.js`,s={attributes:{items_per_page:g},sections:[r],section_url:location.pathname+location.search},l={method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}};h(o,l).then(()=>{let u=location.pathname;u+=location.search,u+=location.search.includes("?")?"&":"?",u+="section_id="+r,h(u).then(n=>{S(n.getElementProduct()),E(n.getElementPointInfinity(),w),b(n.getPaginate(),v),y(n.getElementShowing())})})})}async function B(i){i&&i.forEach(a=>{a.addEventListener("change",async g=>{let r=g.target.value,o=g.target.name,s=g.target.dataset.sectionId;try{let u=N(function(d){g.target.checked?(d[o]||(d[o]=[]),d[o].push(r)):d[o]&&(d[o]=d[o].filter(p=>p!==r))},window.location.search);history.pushState(null,null,u),u=L(u,s);let n=await h(u);S(n.getElementProduct()),x(n.getProductCount()),b(n.getPaginate(),v),y(n.getElementShowing()),E(n.getElementPointInfinity(),w)}catch(l){console.error(l)}})})}function G(i){if(i){let a={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};i.forEach(g=>{g.addEventListener("change",r=>{let o=r.target.value,s=r.target.name,l=r.target.dataset.max,u=r.target.dataset.sectionId;a["filter.v.price.lte"]=l,a[s]=o;try{let d=N(function(f){for(let _ in a)f[_]=[],f[_].push(a[_])},window.location.search);history.pushState(null,null,d);let p=L(d,u);h(p).then(f=>{S(f.getElementProduct()),x(f.getProductCount()),E(f.getElementPointInfinity(),w),b(f.getPaginate(),v),y(f.getElementShowing())})}catch(n){console.error(n)}})})}}function v(i){i&&i.forEach(a=>{a.addEventListener("click",g=>{let r=g.currentTarget,o=r.dataset.url,s=r.dataset.sectionId;function l(n){n.set("section_id",s)}let u=C(l,o.split("?")[1]);h(u).then(n=>{S(n.getElementProduct()),b(n.getPaginate(),v),y(n.getElementShowing())})})})}})();
