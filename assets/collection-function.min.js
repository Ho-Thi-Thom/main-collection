(()=>{function q(){function c(t){t.innerHTML="Loading..."}function i(t){t.innerHTML=""}function d(t,e){let g=new URLSearchParams(e);return t(g),window.location.pathname+"?"+g.toString()}function r(t,e){let g=new URLSearchParams(e),m={};g.forEach(function(I,S){m[S]||(m[S]=[]),m[S].push(I)}),t(m);let U=new URLSearchParams;return Object.keys(m).forEach(I=>{m[I].forEach(S=>{U.append(I,S)})}),`${window.location.pathname}?${U.toString()}`}function o(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function u(t,e){return fetch(t,e).then(g=>g.text()).then(g=>P(g))}function a(t){let e=document.querySelector("#collection__products");t.querySelectorAll("#collection__products > *")?.forEach(g=>{e?.appendChild(g)})}function l(t){let e=document.querySelector("#collection__products");t&&(e.parentNode.replaceChild(t,e),e=t)}function n(t){let e=document.querySelector(".product_count");t&&e.parentNode.replaceChild(t,e)}function s(t){let e=document.querySelector(".collection__toolbar-filter-showing");t&&e.parentNode.replaceChild(t,e)}function f(t,e){let g=document.querySelector("#infinity_point");t&&(g.parentNode.replaceChild(t,g),e(t))}function p(t,e){let g=document.querySelector(".paginate");t&&(g.parentNode.replaceChild(t,g),e(document.querySelectorAll(".paginate_link[data-url]")))}function P(t){let e=document.createElement("div");return e.innerHTML=t,{getElementProduct(){return e.querySelector("#collection__products")},getProductCount(){return e.querySelector(".product_count")},getElementPointInfinity(){return e.querySelector("#infinity_point")},getPaginate(){return e.querySelector(".paginate")},getElementShowing(){return e.querySelector(".collection__toolbar-filter-showing")}}}return{loading:c,hiddenLoading:i,getApi:u,appendProduct:a,setProduct:l,updateCount:n,updateShowing:s,updatePointInfinity:f,createUrl:d,updatePaginate:p,createUrlFilter:r,updateUrl:o}}var{loading:T,createUrl:C,hiddenLoading:A,getApi:h,appendProduct:k,setProduct:E,updateCount:x,updateShowing:y,updatePointInfinity:w,updatePaginate:b,createUrlFilter:N,updateUrl:L}=q();function _(c){if(c){let i=new IntersectionObserver(d=>{d.forEach(r=>{if(r.isIntersecting){let o=r.target,u=o.dataset.url,a=o.dataset.sectionId;try{let n=u?C(function(s){s.set("section_id",a)},u.split("?")[1]):null;if(n==null){i.disconnect();return}T(o),h(n).then(s=>{let f=s.getElementPointInfinity();k(s.getElementProduct()),w(f,_),y(s.getElementShowing())}).finally(()=>{A(o)})}catch(l){console.error(l)}}})});i.observe(c)}}function j(c){c&&c.addEventListener("change",i=>{let d=i.target.value,r=i.target.dataset.sectionId;function o(a){a.set("sort_by",d)}let u=C(o,window.location.href.split("?")[1]);history.pushState(null,null,u),u=L(u,r),h(u).then(a=>{E(a.getElementProduct()),w(a.getElementPointInfinity(),_),y(a.getElementShowing())})})}function F(c){c&&c.addEventListener("change",i=>{let d=i.target.value,r=i.target.dataset.sectionId,o=`${window.Shopify.routes.root}cart/update.js`,u={attributes:{items_per_page:d},sections:[r],section_url:location.pathname+location.search},a={method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}};h(o,a).then(()=>{let l=location.pathname;l+=location.search,l+=location.search.includes("?")?"&":"?",l+="section_id="+r,h(l).then(n=>{E(n.getElementProduct()),w(n.getElementPointInfinity(),_),b(n.getPaginate(),v),y(n.getElementShowing())})})})}async function H(c){c&&c.forEach(i=>{i.addEventListener("change",async d=>{let r=d.target.value,o=d.target.name,u=d.target.dataset.sectionId;try{let l=N(function(s){d.target.checked?(s[o]||(s[o]=[]),s[o].push(r)):s[o]&&(s[o]=s[o].filter(f=>f!==r))},window.location.search);history.pushState(null,null,l),l=L(l,u);let n=await h(l);E(n.getElementProduct()),x(n.getProductCount()),b(n.getPaginate(),v),y(n.getElementShowing()),w(n.getElementPointInfinity(),_)}catch(a){console.error(a)}})})}function B(c){if(c){let i={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};c.forEach(d=>{d.addEventListener("change",r=>{let o=r.target.value,u=r.target.name,a=r.target.dataset.max,l=r.target.dataset.sectionId;i["filter.v.price.lte"]=a,i[u]=o;try{let s=N(function(p){for(let P in i)p[P]=[],p[P].push(i[P])},window.location.search);history.pushState(null,null,s);let f=L(s,l);h(f).then(p=>{E(p.getElementProduct()),x(p.getProductCount()),w(p.getElementPointInfinity(),_),b(p.getPaginate(),v),y(p.getElementShowing())})}catch(n){console.error(n)}})})}}function v(c){c&&c.forEach(i=>{i.addEventListener("click",d=>{let r=d.currentTarget,o=r.dataset.url,u=r.dataset.sectionId;function a(n){n.set("section_id",u)}let l=C(a,o.split("?")[1]);h(l).then(n=>{E(n.getElementProduct()),b(n.getPaginate(),v),y(n.getElementShowing())})})})}})();
