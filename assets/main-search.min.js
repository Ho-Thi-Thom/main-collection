(()=>{function y(t,e){let n=new URLSearchParams(e);return t&&typeof t=="function"&&t(n),window.location.pathname+"?"+n.toString()}function d(t){t&&t.forEach(e=>{e.addEventListener("click",async n=>{let r=n.currentTarget,a=r.dataset.url,i=r.dataset.sectionId;function o(s){s.set("section_id",i)}let c=y(o,a.split("?")[1]);p(c).then(s=>{h(s.getPaginate(),d),f(s.getElementProduct()),g(s.getElementShowing())})})})}function p(t,e){return fetch(t,e).then(n=>n.text()).then(n=>q(n))}function q(t){let e=document.createElement("div");return e.innerHTML=t,{getElementProduct(){return e.querySelector(".search__products")},getPaginate(){return e.querySelector(".paginate")},getElementShowing(){return e.querySelector(".collection__toolbar-filter-showing")}}}function h(t,e){let n=document.querySelector(".paginate");t&&(n.parentNode.replaceChild(t,n),e(document.querySelectorAll(".paginate_link[data-url]")))}function f(t){let e=document.querySelector(".search__products");t&&(e.parentNode.replaceChild(t,e),e=t)}function w(){let t=document.querySelector(".collection__toolbar__filter"),e=document.querySelectorAll(".collection__toolbar-filter-btn"),n=document.querySelectorAll(".collection__toolbar-filter-btn.dropdown"),r=document.querySelectorAll(".collection__toolbar-filter-btn.sidebar"),a=document.querySelector(".collection__toolbar__filter-sidebar"),i=document.querySelector(".collection__toolbar__filter-sidebar > span");e.forEach(o=>{o.addEventListener("click",()=>{let c=o.getAttribute("data-state");!c||c==="closed"?(o.setAttribute("data-state","opened"),o.setAttribute("aria-expanded","true")):(o.setAttribute("data-state","closed"),o.setAttribute("aria-expanded","false")),i&&i.addEventListener("click",()=>{a.classList.remove("active"),o.setAttribute("data-state","closed"),o.setAttribute("aria-expanded","false")})})}),n.forEach(o=>{o.addEventListener("click",()=>{t&&t.classList.toggle("active")})}),r.forEach(o=>{o.addEventListener("click",()=>{a&&a.classList.add("active")})})}function E(t){t&&t.addEventListener("change",e=>{let n=e.target.value,r=e.target.dataset.sectionId;function a(o){o.set("sort_by",n)}let i=y(a,window.location.href.split("?")[1]);history.pushState(null,null,i),i=_(i,r),p(i).then(o=>{f(o.getElementProduct()),g(o.getElementShowing())})})}function P(t){t&&t.addEventListener("change",e=>{let n=e.target.value,r=e.target.dataset.sectionId,a=`${window.Shopify.routes.root}cart/update.js`,i={attributes:{items_per_page:n},sections:[r],section_url:location.pathname+location.search},o={method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}};p(a,o).then(()=>{let c=location.pathname;c+=location.search,c+=location.search.includes("?")?"&":"?",c+="section_id="+r,p(c).then(s=>{f(s.getElementProduct()),h(s.getPaginate(),d),g(s.getElementShowing())})})})}async function b(t){t&&t.forEach(e=>{e.addEventListener("change",async n=>{let r=n.target.value,a=n.target.name,i=n.target.dataset.sectionId;try{let c=x(function(l){n.target.checked?(l[a]||(l[a]=[]),l[a].push(r)):l[a]&&(l[a]=l[a].filter(m=>m!==r))},window.location.search);history.pushState(null,null,c),c=_(c,i);let s=await p(c);f(s.getElementProduct()),h(s.getPaginate(),d),g(s.getElementShowing())}catch(o){console.error(o)}})})}function v(t){if(t){let e={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};t.forEach(n=>{n.addEventListener("change",r=>{let a=r.target.value,i=r.target.name,o=r.target.dataset.max,c=r.target.dataset.sectionId;e["filter.v.price.lte"]=o,e[i]=a;try{let l=x(function(u){for(let S in e)u[S]=[],u[S].push(e[S])},window.location.search);history.pushState(null,null,l);let m=_(l,c);p(m).then(u=>{f(u.getElementProduct()),h(u.getPaginate(),d),g(u.getElementShowing())})}catch(s){console.error(s)}})})}}function g(t){let e=document.querySelector(".collection__toolbar-filter-showing");t&&e.parentNode.replaceChild(t,e)}function x(t,e){let n=new URLSearchParams(e),r={};n.forEach(function(o,c){r[c]||(r[c]=[]),r[c].push(o)}),t(r);let a=new URLSearchParams;return Object.keys(r).forEach(o=>{r[o].forEach(c=>{a.append(o,c)})}),`${window.location.pathname}?${a.toString()}`}function _(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}var I=document.querySelectorAll(".paginate_link[data-url]"),A=document.querySelector("#show"),U=document.querySelector("#sort_by"),N=document.querySelectorAll('input[type="checkbox"]'),T=document.querySelectorAll('input[type="number"]');L();function L(){d(I),w(),E(U),b(N),v(T),P(A)}document.addEventListener("shopify:section:load",L);})();
