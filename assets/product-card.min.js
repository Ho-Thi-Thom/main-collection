(()=>{function d(){document.querySelector("#popup-product-item").classList.remove("active")}function i(){document.querySelector("#popup-product-item").classList.add("active")}var a=document.querySelector("#popup-product-item .close-popup");a&&a.addEventListener("click",()=>{d()});function p(e){let t=document.querySelector("#popup-info"),o=document.querySelector("#popup-info .title"),n=document.querySelector("#popup-info .wrapper-content"),{type:r,title:c,textContent:u}=e;o.setAttribute("data-type",r),o.innerHTML=c.trim(),n.innerHTML=u.trim(),t.classList.add("active"),f(l,1e3)()}function l(){document.querySelector("#popup-info").classList.remove("active")}function f(e,t){var o=null;return function(){clearTimeout(o);var n=arguments,r=this;o=setTimeout(function(){e.apply(r,n)},t)}}function s(e){fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>{switch(t.status){case 200:t.json().then(o=>{let n={type:"success",title:"Add to Cart",textContent:`Add success "${o.items[0].product_title}"`};y(),p(n)});break;case 404:break;case 422:t.json().then(o=>{let n={type:"error",title:"422",textContent:o.description};p(n)});break;default:break}}).catch(t=>{console.log("Error:",t)})}async function m(){try{return(await(await fetch(window.Shopify.routes.root+"cart.js")).json()).item_count}catch(e){return e}}async function y(){try{let e=await m(),t=document.querySelector(".jsCountItemCart");t.textContent=e}catch(e){console.error(e)}}window.addEventListener("DOMContentLoaded",function(){document.querySelector("body").addEventListener("click",t=>{if(t.target.classList.contains("jsAddToCart")){t.preventDefault();let n={items:[{id:t.target.dataset.firstVariant,quantity:1}]};s(n)}if(t.target.classList.contains("jsQuickView")){t.preventDefault();let o=t.target.dataset.urlProductPopup;S(o)}})});async function S(e){let o=await(await fetch(e)).text(),n=document.createElement("div");n.innerHTML=o;let r=document.querySelector("#popup-product-item"),c=n.querySelector(".dialog__quick-view");r.querySelector(".content").appendChild(c),i()}})();
