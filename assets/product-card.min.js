(()=>{function j(t,e){try{return JSON.parse(t.textContent)}catch(o){return console.log(o),e}}function E(t="",e={},o){let n=new URLSearchParams(e);return o&&typeof o=="function"&&o(n),t?t+"?"+n.toString():window.location.pathname+"?"+n.toString()}function O(t,e){let o=new URLSearchParams(e);return t&&typeof t=="function"&&t(o),window.location.pathname+"?"+o.toString()}function N(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function U(t){return t.charAt(0).toUpperCase()+t.slice(1)}function M(t,e,o=!0){t&&(t(),o&&document.addEventListener("shopify:section:load",n=>{n.detail.sectionId===e&&t()}))}function L(t){let e=document.querySelector("#popup-info"),o=document.querySelector("#popup-info .title"),n=document.querySelector("#popup-info .wrapper-content"),{type:r,title:i,textContent:u}=t;o.setAttribute("data-type",r),o.innerHTML=i.trim(),n.innerHTML=u.trim(),e.classList.add("active")}function g(t,e){var o=null;return function(){clearTimeout(o);var n=arguments,r=this;o=setTimeout(function(){t.apply(r,n)},e)}}function P(t,e,o,n=!1){let r=document.createElement("div");r.innerHTML=t;let i=document.querySelector(`li.cart__item.jsLineItem[data-line-index="${e}"]`);if(o)n||i.remove();else{let m=r.querySelector(`li.cart__item.jsLineItem[data-line-index="${e}"]`),d=i.querySelectorAll(".jsLineUpdate"),c=m.querySelectorAll(".jsLineUpdate");d.forEach((a,l)=>{a.parentNode.replaceChild(c[l],a)})}let u=document.querySelectorAll(".js-cart-update"),p=r.querySelectorAll(".js-cart-update");u.forEach((m,d)=>{m.parentNode.replaceChild(p[d],m)})}function F(t){fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:t})})}async function A(t){let{variantId:e,newQuantity:o,sectionId:n}=t;return await(await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:o,sections:n})})).json()}function k(t,e,o){let n=document.querySelector(`.cart__item.jsLineItem[data-line-index="${o}"] .add__qlt`);switch(e){case"add":+t.value==+t.max&&(n.disabled=!0);break;case"remove":n.disabled=!1;break;default:break}}function V(){document.querySelectorAll(".jsLineItem").forEach(e=>{let o=e.querySelector(".quantity__input"),n=parseInt(o.getAttribute("max")),r=e.querySelector(".add__qlt");o.value===n.toString()?r.disabled=!0:r.disabled=!1})}async function Z(){try{return(await(await fetch(window.Shopify.routes.root+"cart.js")).json()).item_count}catch(t){return t}}async function T(){try{let t=await Z(),e=document.querySelector(".jsCountItemCart");return e.textContent=t,t}catch(t){console.error(t)}}function x(t,e=!0){return new Promise((o,n)=>{fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(r=>{switch(r.status){case 200:r.json().then(i=>{let u={type:"success",title:"Add to Cart",textContent:`Add success "${i.items[0].product_title}"`};T(),e&&L(u),o(!0)});break;case 404:o(!1);break;case 422:r.json().then(i=>{let u={type:"error",title:"422",textContent:i.description};L(u),o(!1)});break;default:o(!1);break}}).catch(r=>{console.log("Error:",r),n(r)})})}function H(){let t=null,e=null,o=null,n=null,r=()=>{t&&t.destroy(),e&&e.destroy();let d=n?"horizontal":"vertical",c=document.querySelector("#customize"),a=document.querySelector("#customize-thumbnails");return t=tns({container:c,navContainer:a||void 0,controlsContainer:"#controls",items:1,axis:"horizontal",autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,nav:!0}),a&&(e=tns({container:a,items:3,axis:d,autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,controlsContainer:"#customize-controls",nav:!1}),t.events.on("indexChanged",function(l){e.goTo(l.index)})),t},i=g(()=>{let d=window.matchMedia("(max-width: 1023px)").matches;n!==null&&n!==d&&(n=d,r())},500),u=()=>{o&&o.disconnect();let d=document.querySelector("#customize");o=new ResizeObserver(i),o.observe(d)},p=()=>{o&&(o.disconnect(),o=null)};return(()=>{n=window.matchMedia("(max-width: 1023px)").matches,r(),u(),window.addEventListener("resize",i)})(),{slider:t,cleanup:p}}function tt(t,e,o=!1){if(o)return;let n=document.querySelector(".compare-price"),r=document.querySelector(".price");n.parentNode.replaceChild(t,n),r.parentNode.replaceChild(e,r)}function et(t,e=!1){if(e)return;let o=document.querySelector(".variant-inventory");o.parentNode.replaceChild(t,o)}function R(t,e=!1){let o=document.querySelector(".btn-add");if(e){o.setAttribute("disabled","");let n=o.querySelector("span");o.setAttribute("data-selected-quantity",0),n.textContent="Not Available";return}if(o&&t){let n=o.querySelector("span"),r=t.querySelector("span");n&&r&&n.parentNode.replaceChild(r,n);let i=t.getAttribute("data-selected-quantity");i&&o.setAttribute("data-selected-quantity",i),parseInt(i)===0?o.setAttribute("disabled","true"):document.querySelector(".cart__condition").classList.contains("checked")&&o.removeAttribute("disabled")}}function ot(t,e=!1){if(e)return;let o=document.querySelector(".product-sku");o.parentNode.replaceChild(t,o)}function nt(t,e=!1){if(e)return;let o=document.querySelector(".jsSubmit");o.value=t.value}function z(t){let e=t();e?(fetch(e).then(o=>o.text()).then(o=>{let n=document.createElement("div");n.innerHTML=o,tt(n.querySelector(".compare-price"),n.querySelector(".price")),et(n.querySelector(".variant-inventory")),R(n.querySelector(".btn-add")),ot(n.querySelector(".product-sku")),nt(n.querySelector(".jsSubmit"))}),B(!1)):(R(null,!0),B(!0))}function B(t=!1){let e=document.querySelector(".jsProductForm .card-info");t?e.classList.remove("visibility-hidden"):e.classList.add("visibility-hidden")}function Q(t,e,o){o=U(o);let n=e.filter(c=>c.name!==o).map(c=>c.position),r=e.find(c=>c.name===o),i=r?r.position:null,p=[...new Set(t)].reduce((c,a)=>(a.split(" / ").filter((f,s)=>s!==i-1).forEach((f,s)=>{c[s]||(c[s]=[]),c[s].includes(f)||c[s].push(f)}),c),[]),m=n.map((c,a)=>[c,p[a]]),d=document.querySelectorAll(".check-position");m.forEach(c=>{d.forEach(a=>{if(c[0]==a.dataset.position){let l=a.querySelectorAll('input[type="radio"]'),h=a.querySelectorAll("option");Array.from(l).concat(Array.from(h)).forEach(f=>{let s=f.value;c[1].includes(s)?f.setAttribute("data-disabled","false"):f.setAttribute("data-disabled","true")})}})})}function J(t,e){let o=[];return t&&t.forEach(n=>{n.querySelectorAll("option").forEach(i=>{let u=i.value;i.selected&&o.push(u)})}),e&&e.forEach(n=>{let r=n.value;n.checked&&o.push(r)}),o}function $(){document.getElementById("cart-condition").addEventListener("click",function(e){let o=document.querySelector(".cart__condition"),n=document.querySelector("button[name='add']");if(this.checked){o.classList.add("checked");let r=n.getAttribute("data-selected-quantity");parseInt(r)!==0&&n.removeAttribute("disabled")}else o.classList.remove("checked"),n.setAttribute("disabled","")})}function rt(t=null,e=document,o){let n=e.querySelector(".jsProductForm"),r=j(e.querySelector("#popup_product_options"),[]),u=j(e.querySelector("#popup-variants"),[]).variants,{slider:p,cleanup:m}=o(),d=e.querySelector(".remove__qlt"),c=e.querySelector(".add__qlt"),a=e.querySelector(".quantity__input"),l=e.querySelector("#jsFormProduct");n.addEventListener("change",function(s){if(s.target.id!=="cart-condition"&&s.target.className!=="quantity__input"){let y=u.filter(S=>Object.values(S).includes(s.target.value)).map(S=>S.title);z(()=>h(n.dataset.sectionId,p)),Q(y,r,s.target.name)}});function h(s,y){let S=e.querySelectorAll(".js-variant-change"),q=e.querySelectorAll(".js-radio"),w=J(S,q),C=u.find(v=>v.options.join("/")==w.join("/"));if(!C)return;C.featured_image!==null&&y.goTo(C.featured_image.position-1);let b="";return t?b=E(t,void 0,function(v){v.set("variant",C.id)}):(b=O(function(v){v.set("variant",C.id)}),history.pushState(null,null,b)),N(b,s)}d.addEventListener("click",function(){let s=parseInt(a.value);s>1&&(a.value=s-1)}),c.addEventListener("click",function(){let s=parseInt(a.value);a.value=s+1}),a.addEventListener("keydown",function(s){s.key==="Enter"&&s.preventDefault()}),f(),$();function f(){l&&l.dataset.type==="b"&&l.addEventListener("submit",function(s){s.preventDefault();let S={items:[Object.fromEntries(new FormData(s.target).entries())]};try{x(S)}catch(q){console.log(q)}})}}function K(t,e){rt(t,e,H)}function ct(){let t=document.querySelector("#popup-product-item");t.classList.remove("active");let e=t.querySelector("#popup-product-item .content");e.innerHTML=""}function W(){document.querySelector("#popup-product-item").classList.add("active")}var G=document.querySelector("#popup-product-item .close-popup");G&&G.addEventListener("click",()=>{ct()});function at(){let t=document.querySelector(".jsCartPopup"),e=document.querySelector(".jsCartPopup .popup__header-close");e&&e.addEventListener("click",()=>{t.classList.remove("active"),document.querySelector("#bg-color").classList.remove("body-overlay")})}at();function X(){document.querySelector(".jsCartPopup").classList.add("active"),document.querySelector("#bg-color").classList.add("body-overlay")}async function it(t){try{return await(await fetch(window.location.pathname+`?section_id=${t}`)).text()}catch(e){return e}}async function _(){let e=document.querySelector(".jsCartPopup").dataset.sectionId,o=await it(e),n=document.createElement("div");n.innerHTML=o;let i=n.querySelector(".jsCartPopup").querySelectorAll(".jsPopupUpdate");return document.querySelectorAll(".jsCartPopup .jsPopupUpdate").forEach((p,m)=>{p.parentNode.replaceChild(i[m],p)}),!0}var I=document.querySelector(".cart-section-wrapper")?.dataset.sectionId;I&&M(D,I);function D(t=!0,e=!1){let o=document.querySelectorAll(".cart__item .remove__qlt"),n=document.querySelectorAll(".cart__item .add__qlt"),r=document.querySelectorAll(".btn-remove");V(),i(r),i([...n,...o]);function i(c=[]){!c||c.length===0||c.forEach(a=>{let l=null;a.addEventListener("click",h=>{let f=h.target,s=f.closest(".cart__item.jsLineItem").dataset.lineIndex,y=document.querySelector(`.cart__item.jsLineItem[data-line-index="${s}"] .quantity__input`);f.classList.contains("add__qlt")&&(y.stepUp(),k(y,"add",s)),f.classList.contains("remove__qlt")&&(y.stepDown(),k(y,"remove",s));let S=y.value,q=f.classList.contains("btn-remove");q&&(S=0),l&&clearTimeout(l),l=setTimeout(async()=>{y.value;let w=y.getAttribute("data-sections"),b={variantId:y.getAttribute("data-key"),newQuantity:S,sectionId:w};try{let Y=(await A(b)).sections[w];await T()?P(Y,s,checkRemove=q):e?_():location.reload()}catch(v){console.log("Error",v)}},1e3)})})}document.querySelectorAll(".cart__item .quantity__input").forEach(function(c){c.addEventListener("keydown",function(a){a.key==="Enter"&&a.preventDefault()}),c.addEventListener("input",g(async a=>{let l=a.target.closest(".cart__item.jsLineItem").dataset.lineIndex,h=a.target,s={variantId:h.getAttribute("data-key"),newQuantity:h.value,sectionId:I};try{let S=(await A(s)).sections[I];P(S,l)}catch(y){let S={type:"error",title:"422",textContent:`Only ${h.getAttribute("max")} products in stock`};L(S)}},2e3))}),document.querySelectorAll(".accordion-initialized").forEach(function(c){let a=c.querySelector(".accordion-trigger"),l=c.querySelector(".cart__form-note");a.addEventListener("click",function(){l.classList.toggle("active")})});let m=document.getElementById("cart-note"),d=g(()=>F(m.value),500);m.addEventListener("input",d),t&&st()}function st(){let t=document.getElementsByName("shipping_address[country]")[0];t.addEventListener("change",function(r){let u=t.options[t.selectedIndex].getAttribute("data-provinces"),p=document.querySelector(".jsProvince"),m=p.querySelector("[name='shipping_address[province]']");JSON.parse(u).length?(JSON.parse(u).forEach(([d,c])=>{let a=document.createElement("option");a.value=d,a.text=c,m.appendChild(a)}),p.style.display="block"):p.style.display="none"});let o=document.querySelector(".jsShippingRates").dataset.url;document.querySelector(".shipping-form").addEventListener("submit",r=>{r.preventDefault();let i=Object.fromEntries(new FormData(r.target).entries()),u=document.querySelector(".jsButtonShipping");u.classList.add("loading");let p=E(o,i),m=document.querySelector(".js-shipping-result"),d=document.querySelector("template").content.firstElementChild,c=document.createElement("div");m.innerHTML="",fetch(p).then(a=>a.json()).then(a=>{let l=a.shipping_rates,h=theme.strings.notFoundShippingRate;l&&l.length>1?h=theme.strings.manyShippingRate.replace("{{ number }}",l.length):l&&l.length===1&&(h=theme.strings.oneShippingRate),document.querySelector(".js-response-title").innerHTML=h,l&&l.forEach(f=>{c.innerHTML=d.outerHTML,c.querySelector(".shipping-name").innerHTML=f.name,c.querySelector(".shipping-cost").textContent=f.price,m.insertAdjacentHTML("beforeend",c.innerHTML)}),u.classList.remove("loading")})})}window.addEventListener("DOMContentLoaded",function(){document.querySelector("body").addEventListener("click",async e=>{if(e.target.classList.contains("jsAddToCart")){e.preventDefault();let o=e.target.closest(".jsProductItemForm"),r={items:[Object.fromEntries(new FormData(o).entries())]};try{await x(r,!1)&&await _()&&(g(X(),500),D(!1,!0))}catch(i){console.log("Error:",i)}}if(e.target.classList.contains("jsQuickView")){e.preventDefault();let o=e.target.dataset.urlProductPopup;ut(o)}})});async function ut(t){let o=await(await fetch(t)).text(),n=document.createElement("div");n.innerHTML=o;let r=document.querySelector("#popup-product-item .popup-content .content"),i=n.querySelector(".dialog__quick-view");r.innerHTML="",r.appendChild(i);let u=t.split("?")[0];K(u,r),W()}})();
