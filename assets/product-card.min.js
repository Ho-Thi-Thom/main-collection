(()=>{function C(e,o){try{return JSON.parse(e.textContent)}catch(t){return console.log(t),o}}function x(e="",o={},t){let n=new URLSearchParams(o);return t&&typeof t=="function"&&t(n),e?e+"?"+n.toString():window.location.pathname+"?"+n.toString()}function E(e,o){let t=new URLSearchParams(o);return e&&typeof e=="function"&&e(t),window.location.pathname+"?"+t.toString()}function L(e,o){return e+=e.includes("?")?"&":"?",e+=`section_id=${o}`}function k(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e){let o=document.querySelector("#popup-info"),t=document.querySelector("#popup-info .title"),n=document.querySelector("#popup-info .wrapper-content"),{type:r,title:a,textContent:l}=e;t.setAttribute("data-type",r),t.innerHTML=a.trim(),n.innerHTML=l.trim(),o.classList.add("active"),w(N,1e3)()}function N(){document.querySelector("#popup-info").classList.remove("active")}function w(e,o){var t=null;return function(){clearTimeout(t);var n=arguments,r=this;t=setTimeout(function(){e.apply(r,n)},o)}}function g(e){fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o=>{switch(o.status){case 200:o.json().then(t=>{let n={type:"success",title:"Add to Cart",textContent:`Add success "${t.items[0].product_title}"`};F(),b(n)});break;case 404:break;case 422:o.json().then(t=>{let n={type:"error",title:"422",textContent:t.description};b(n)});break;default:break}}).catch(o=>{console.log("Error:",o)})}async function U(){try{return(await(await fetch(window.Shopify.routes.root+"cart.js")).json()).item_count}catch(e){return e}}async function F(){try{let e=await U(),o=document.querySelector(".jsCountItemCart");o.textContent=e}catch(e){console.error(e)}}function A(){let e=null,o=null,t=null,n=null,r=()=>{e&&e.destroy(),o&&o.destroy();let d=n?"horizontal":"vertical",c=document.querySelector("#customize"),s=document.querySelector("#customize-thumbnails");return e=tns({container:c,navContainer:s||void 0,controlsContainer:"#controls",items:1,axis:"horizontal",autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,nav:!0}),s&&(o=tns({container:s,items:3,axis:d,autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,controlsContainer:"#customize-controls",nav:!1}),e.events.on("indexChanged",function(f){o.goTo(f.index)})),e},a=w(()=>{let d=window.matchMedia("(max-width: 1023px)").matches;n!==null&&n!==d&&(n=d,r())},500),l=()=>{t&&t.disconnect();let d=document.querySelector("#customize");t=new ResizeObserver(a),t.observe(d)},m=()=>{t&&(t.disconnect(),t=null)};return(()=>{n=window.matchMedia("(max-width: 1023px)").matches,r(),l(),window.addEventListener("resize",a)})(),{slider:e,cleanup:m}}function H(e,o,t=!1){if(t)return;let n=document.querySelector(".compare-price"),r=document.querySelector(".price");n.parentNode.replaceChild(e,n),r.parentNode.replaceChild(o,r)}function B(e,o=!1){if(o)return;let t=document.querySelector(".variant-inventory");t.parentNode.replaceChild(e,t)}function I(e,o=!1){let t=document.querySelector(".btn-add");if(o){t.setAttribute("disabled","");let n=t.querySelector("span");t.setAttribute("data-selected-quantity",0),n.textContent="Not Available";return}if(t&&e){let n=t.querySelector("span"),r=e.querySelector("span");n&&r&&n.parentNode.replaceChild(r,n);let a=e.getAttribute("data-selected-quantity");a&&t.setAttribute("data-selected-quantity",a),parseInt(a)===0?t.setAttribute("disabled","true"):document.querySelector(".cart__condition").classList.contains("checked")&&t.removeAttribute("disabled")}}function Q(e,o=!1){if(o)return;let t=document.querySelector(".product-sku");t.parentNode.replaceChild(e,t)}function R(e,o=!1){if(o)return;let t=document.querySelector(".jsSubmit");t.value=e.value}function P(e){let o=e();o?fetch(o).then(t=>t.text()).then(t=>{let n=document.createElement("div");n.innerHTML=t,H(n.querySelector(".compare-price"),n.querySelector(".price")),B(n.querySelector(".variant-inventory")),I(n.querySelector(".btn-add")),Q(n.querySelector(".product-sku")),R(n.querySelector(".jsSubmit"))}):(I(null,!0),b({type:"warring",title:"Not found",textContent:"Variant does not exist"}))}function T(e,o,t){t=k(t);let n=o.filter(c=>c.name!==t).map(c=>c.position),r=o.find(c=>c.name===t),a=r?r.position:null,m=[...new Set(e)].reduce((c,s)=>(s.split(" / ").filter((i,u)=>u!==a-1).forEach((i,u)=>{c[u]||(c[u]=[]),c[u].includes(i)||c[u].push(i)}),c),[]),S=n.map((c,s)=>[c,m[s]]),d=document.querySelectorAll(".check-position");S.forEach(c=>{d.forEach(s=>{if(c[0]==s.dataset.position){let f=s.querySelectorAll('input[type="radio"]'),v=s.querySelectorAll("option");Array.from(f).concat(Array.from(v)).forEach(i=>{let u=i.value;c[1].includes(u)?i.setAttribute("data-disabled","false"):i.setAttribute("data-disabled","true")})}})})}function _(e,o){let t=[];return e&&e.forEach(n=>{n.querySelectorAll("option").forEach(a=>{let l=a.value;a.selected&&t.push(l)})}),o&&o.forEach(n=>{let r=n.value;n.checked&&t.push(r)}),t}function j(){document.getElementById("cart-condition").addEventListener("click",function(o){let t=document.querySelector(".cart__condition"),n=document.querySelector("button[name='add']");if(this.checked){t.classList.add("checked");let r=n.getAttribute("data-selected-quantity");parseInt(r)!==0&&n.removeAttribute("disabled")}else t.classList.remove("checked"),n.setAttribute("disabled","")})}function D(e=null,o=document){let t=o.querySelector(".jsProductForm"),n=C(o.querySelector("#popup_product_options"),[]),a=C(o.querySelector("#popup-variants"),[]).variants,{slider:l,cleanup:m}=A(),S=o.querySelector(".remove__qlt"),d=o.querySelector(".add__qlt"),c=o.querySelector(".quantity__input"),s=o.querySelector("#jsFormProduct");t.addEventListener("change",function(i){if(i.target.id!=="cart-condition"){let u=a.filter(p=>Object.values(p).includes(i.target.value)).map(p=>p.title);P(()=>f(t.dataset.sectionId,l)),T(u,n,i.target.name)}});function f(i,u){let p=o.querySelectorAll(".js-variant-change"),z=o.querySelectorAll(".js-radio"),M=_(p,z),y=a.find(h=>h.options.join("/")==M.join("/"));if(!y)return;y.featured_image!==null&&u.goTo(y.featured_image.position-1);let q="";return e?q=x(e,void 0,function(h){h.set("variant",y.id)}):(q=E(function(h){h.set("variant",y.id)}),history.pushState(null,null,q)),L(q,i)}S.addEventListener("click",function(){let i=parseInt(c.value);i>1&&(c.value=i-1)}),d.addEventListener("click",function(){let i=parseInt(c.value);c.value=i+1}),c.addEventListener("keydown",function(i){i.key==="Enter"&&i.preventDefault()}),v(),j();function v(){s&&s.dataset.type==="b"&&s.addEventListener("submit",function(i){i.preventDefault();let p={items:[Object.fromEntries(new FormData(i.target).entries())]};g(p)})}}function J(){let e=document.querySelector("#popup-product-item");e.classList.remove("active");let o=e.querySelector("#popup-product-item .content");o.innerHTML=""}function V(){document.querySelector("#popup-product-item").classList.add("active")}var O=document.querySelector("#popup-product-item .close-popup div");O&&O.addEventListener("click",()=>{J()});window.addEventListener("DOMContentLoaded",function(){document.querySelector("body").addEventListener("click",o=>{if(o.target.classList.contains("jsAddToCart")){o.preventDefault();let n={items:[{id:o.target.dataset.firstVariant,quantity:1}]};g(n)}if(o.target.classList.contains("jsQuickView")){o.preventDefault();let t=o.target.dataset.urlProductPopup;$(t)}})});async function $(e){let t=await(await fetch(e)).text(),n=document.createElement("div");n.innerHTML=t;let r=document.querySelector("#popup-product-item .popup-content .content"),a=n.querySelector(".dialog__quick-view");r.innerHTML="",r.appendChild(a);let l=e.split("?")[0];D(l,r),V()}})();
