(()=>{function _(t,e){try{return JSON.parse(t.textContent)}catch(n){return console.log(n),e}}function w(t="",e={},n){let o=new URLSearchParams(e);return n&&typeof n=="function"&&n(o),t?t+"?"+o.toString():window.location.pathname+"?"+o.toString()}function D(t,e){let n=new URLSearchParams(e);return t&&typeof t=="function"&&t(n),window.location.pathname+"?"+n.toString()}function O(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function U(t){return t.charAt(0).toUpperCase()+t.slice(1)}function M(t,e,n=!0){t&&(t(),n&&document.addEventListener("shopify:section:load",o=>{o.detail.sectionId===e&&t()}))}function x(t){let e=document.querySelector("#popup-info"),n=document.querySelector("#popup-info .title"),o=document.querySelector("#popup-info .wrapper-content"),{type:r,title:s,textContent:u}=t;n.setAttribute("data-type",r),n.innerHTML=s.trim(),o.innerHTML=u.trim(),e.classList.add("active")}function C(t,e){var n=null;return function(){clearTimeout(n);var o=arguments,r=this;n=setTimeout(function(){t.apply(r,o)},e)}}function j(t,e,n){let o=document.createElement("div");o.innerHTML=t;let r=document.querySelector(`li.cart__item.jsLineItem[data-line-index="${e}"]`);if(n)r.remove();else{let d=o.querySelector(`li.cart__item.jsLineItem[data-line-index="${e}"]`),f=r.querySelectorAll(".jsLineUpdate"),l=d.querySelectorAll(".jsLineUpdate");f.forEach((c,i)=>{c.parentNode.replaceChild(l[i],c)})}let s=document.querySelectorAll(".js-cart-update"),u=o.querySelectorAll(".js-cart-update");s.forEach((d,f)=>{d.parentNode.replaceChild(u[f],d)})}function N(t){fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:t})})}async function P(t){let{variantId:e,newQuantity:n,sectionId:o}=t;return await(await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:n,sections:o})})).json()}function A(t,e,n){let o=document.querySelector(`.cart__item.jsLineItem[data-line-index="${n}"] .add__qlt`);switch(e){case"add":+t.value==+t.max&&(o.disabled=!0);break;case"remove":o.disabled=!1;break;default:break}}function F(){document.querySelectorAll(".jsLineItem").forEach(e=>{let n=e.querySelector(".quantity__input"),o=parseInt(n.getAttribute("max")),r=e.querySelector(".add__qlt");n.value===o.toString()?r.disabled=!0:r.disabled=!1})}async function Y(){try{return(await(await fetch(window.Shopify.routes.root+"cart.js")).json()).item_count}catch(t){return t}}async function b(){try{let t=await Y(),e=document.querySelector(".jsCountItemCart");e.textContent=t}catch(t){console.error(t)}}function E(t,e=!0){return new Promise((n,o)=>{fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(r=>{switch(r.status){case 200:r.json().then(s=>{let u={type:"success",title:"Add to Cart",textContent:`Add success "${s.items[0].product_title}"`};b(),e&&x(u),n(!0)});break;case 404:n(!1);break;case 422:r.json().then(s=>{let u={type:"error",title:"422",textContent:s.description};x(u),n(!1)});break;default:n(!1);break}}).catch(r=>{console.log("Error:",r),o(r)})})}function V(){let t=null,e=null,n=null,o=null,r=()=>{t&&t.destroy(),e&&e.destroy();let l=o?"horizontal":"vertical",c=document.querySelector("#customize"),i=document.querySelector("#customize-thumbnails");return t=tns({container:c,navContainer:i||void 0,controlsContainer:"#controls",items:1,axis:"horizontal",autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,nav:!0}),i&&(e=tns({container:i,items:3,axis:l,autoplay:!1,autoplayTimeout:1e3,speed:400,mouseDrag:!0,loop:!1,controls:!0,controlsContainer:"#customize-controls",nav:!1}),t.events.on("indexChanged",function(p){e.goTo(p.index)})),t},s=C(()=>{let l=window.matchMedia("(max-width: 1023px)").matches;o!==null&&o!==l&&(o=l,r())},500),u=()=>{n&&n.disconnect();let l=document.querySelector("#customize");n=new ResizeObserver(s),n.observe(l)},d=()=>{n&&(n.disconnect(),n=null)};return(()=>{o=window.matchMedia("(max-width: 1023px)").matches,r(),u(),window.addEventListener("resize",s)})(),{slider:t,cleanup:d}}function Z(t,e,n=!1){if(n)return;let o=document.querySelector(".compare-price"),r=document.querySelector(".price");o.parentNode.replaceChild(t,o),r.parentNode.replaceChild(e,r)}function tt(t,e=!1){if(e)return;let n=document.querySelector(".variant-inventory");n.parentNode.replaceChild(t,n)}function H(t,e=!1){let n=document.querySelector(".btn-add");if(e){n.setAttribute("disabled","");let o=n.querySelector("span");n.setAttribute("data-selected-quantity",0),o.textContent="Not Available";return}if(n&&t){let o=n.querySelector("span"),r=t.querySelector("span");o&&r&&o.parentNode.replaceChild(r,o);let s=t.getAttribute("data-selected-quantity");s&&n.setAttribute("data-selected-quantity",s),parseInt(s)===0?n.setAttribute("disabled","true"):document.querySelector(".cart__condition").classList.contains("checked")&&n.removeAttribute("disabled")}}function et(t,e=!1){if(e)return;let n=document.querySelector(".product-sku");n.parentNode.replaceChild(t,n)}function nt(t,e=!1){if(e)return;let n=document.querySelector(".jsSubmit");n.value=t.value}function R(t){let e=t();e?(fetch(e).then(n=>n.text()).then(n=>{let o=document.createElement("div");o.innerHTML=n,Z(o.querySelector(".compare-price"),o.querySelector(".price")),tt(o.querySelector(".variant-inventory")),H(o.querySelector(".btn-add")),et(o.querySelector(".product-sku")),nt(o.querySelector(".jsSubmit"))}),z(!1)):(H(null,!0),z(!0))}function z(t=!1){let e=document.querySelector(".jsProductForm .card-info");t?e.classList.remove("visibility-hidden"):e.classList.add("visibility-hidden")}function B(t,e,n){n=U(n);let o=e.filter(c=>c.name!==n).map(c=>c.position),r=e.find(c=>c.name===n),s=r?r.position:null,d=[...new Set(t)].reduce((c,i)=>(i.split(" / ").filter((m,a)=>a!==s-1).forEach((m,a)=>{c[a]||(c[a]=[]),c[a].includes(m)||c[a].push(m)}),c),[]),f=o.map((c,i)=>[c,d[i]]),l=document.querySelectorAll(".check-position");f.forEach(c=>{l.forEach(i=>{if(c[0]==i.dataset.position){let p=i.querySelectorAll('input[type="radio"]'),y=i.querySelectorAll("option");Array.from(p).concat(Array.from(y)).forEach(m=>{let a=m.value;c[1].includes(a)?m.setAttribute("data-disabled","false"):m.setAttribute("data-disabled","true")})}})})}function Q(t,e){let n=[];return t&&t.forEach(o=>{o.querySelectorAll("option").forEach(s=>{let u=s.value;s.selected&&n.push(u)})}),e&&e.forEach(o=>{let r=o.value;o.checked&&n.push(r)}),n}function J(){document.getElementById("cart-condition").addEventListener("click",function(e){let n=document.querySelector(".cart__condition"),o=document.querySelector("button[name='add']");if(this.checked){n.classList.add("checked");let r=o.getAttribute("data-selected-quantity");parseInt(r)!==0&&o.removeAttribute("disabled")}else n.classList.remove("checked"),o.setAttribute("disabled","")})}function ot(t=null,e=document,n){let o=e.querySelector(".jsProductForm"),r=_(e.querySelector("#popup_product_options"),[]),u=_(e.querySelector("#popup-variants"),[]).variants,{slider:d,cleanup:f}=n(),l=e.querySelector(".remove__qlt"),c=e.querySelector(".add__qlt"),i=e.querySelector(".quantity__input"),p=e.querySelector("#jsFormProduct");o.addEventListener("change",function(a){if(a.target.id!=="cart-condition"){let S=u.filter(h=>Object.values(h).includes(a.target.value)).map(h=>h.title);R(()=>y(o.dataset.sectionId,d)),B(S,r,a.target.name)}});function y(a,S){let h=e.querySelectorAll(".js-variant-change"),L=e.querySelectorAll(".js-radio"),T=Q(h,L),v=u.find(g=>g.options.join("/")==T.join("/"));if(!v)return;v.featured_image!==null&&S.goTo(v.featured_image.position-1);let q="";return t?q=w(t,void 0,function(g){g.set("variant",v.id)}):(q=D(function(g){g.set("variant",v.id)}),history.pushState(null,null,q)),O(q,a)}l.addEventListener("click",function(){let a=parseInt(i.value);a>1&&(i.value=a-1)}),c.addEventListener("click",function(){let a=parseInt(i.value);i.value=a+1}),i.addEventListener("keydown",function(a){a.key==="Enter"&&a.preventDefault()}),m(),J();function m(){p&&p.dataset.type==="b"&&p.addEventListener("submit",function(a){a.preventDefault();let h={items:[Object.fromEntries(new FormData(a.target).entries())]};E(h)})}}function $(t,e){ot(t,e,V)}function rt(){let t=document.querySelector("#popup-product-item");t.classList.remove("active");let e=t.querySelector("#popup-product-item .content");e.innerHTML=""}function K(){document.querySelector("#popup-product-item").classList.add("active")}var W=document.querySelector("#popup-product-item .close-popup div");W&&W.addEventListener("click",()=>{rt()});function ct(){let t=document.querySelector(".jsCartPopup"),e=document.querySelector(".jsCartPopup .popup__header-close");e&&e.addEventListener("click",()=>{t.classList.remove("active"),document.querySelector("#bg-color").classList.remove("body-overlay")})}ct();function G(){document.querySelector(".jsCartPopup").classList.add("active"),document.querySelector("#bg-color").classList.add("body-overlay")}async function X(t){try{return await(await fetch(window.location.pathname+`?section_id=${t}`)).text()}catch(e){return e}}var I=document.querySelector(".cart-section-wrapper")?.dataset.sectionId;I&&M(k,I);function k(t=!0){let e=document.querySelectorAll(".cart__item .remove__qlt"),n=document.querySelectorAll(".cart__item .add__qlt"),o=document.querySelectorAll(".btn-remove");F(),r(o),r([...n,...e]);function r(l=[]){!l||l.length===0||l.forEach(c=>{let i=null;c.addEventListener("click",p=>{let y=p.target,m=y.closest(".cart__item.jsLineItem").dataset.lineIndex,a=document.querySelector(`.cart__item.jsLineItem[data-line-index="${m}"] .quantity__input`);y.classList.contains("add__qlt")&&(a.stepUp(),A(a,"add",m)),y.classList.contains("remove__qlt")&&(a.stepDown(),A(a,"remove",m));let S=a.value,h=y.classList.contains("btn-remove");h&&(S=0),i&&clearTimeout(i),i=setTimeout(async()=>{a.value;let L=a.getAttribute("data-sections"),v={variantId:a.getAttribute("data-key"),newQuantity:S,sectionId:L};try{let g=(await P(v)).sections[L];j(g,m,checkRemove=h),b()}catch(q){console.log(q)}},1e3)})})}document.querySelectorAll(".cart__item .quantity__input").forEach(function(l){l.addEventListener("keydown",function(c){c.key==="Enter"&&c.preventDefault()}),l.addEventListener("input",C(async c=>{let i=c.target.closest(".cart__item.jsLineItem").dataset.lineIndex,p=c.target,m={variantId:p.getAttribute("data-key"),newQuantity:p.value,sectionId:I};try{let S=(await P(m)).sections[I];j(S,i)}catch(a){}},2e3))}),document.querySelectorAll(".accordion-initialized").forEach(function(l){let c=l.querySelector(".accordion-trigger"),i=l.querySelector(".cart__form-note");c.addEventListener("click",function(){i.classList.toggle("active")})});let d=document.getElementById("cart-note"),f=C(()=>N(d.value),500);d.addEventListener("input",f),t&&at()}function at(){let t=document.getElementsByName("shipping_address[country]")[0];t.addEventListener("change",function(r){let u=t.options[t.selectedIndex].getAttribute("data-provinces"),d=document.querySelector(".jsProvince"),f=d.querySelector("[name='shipping_address[province]']");JSON.parse(u).length?(JSON.parse(u).forEach(([l,c])=>{let i=document.createElement("option");i.value=l,i.text=c,f.appendChild(i)}),d.style.display="block"):d.style.display="none"});let n=document.querySelector(".jsShippingRates").dataset.url;document.querySelector(".shipping-form").addEventListener("submit",r=>{r.preventDefault();let s=Object.fromEntries(new FormData(r.target).entries()),u=document.querySelector(".jsButtonShipping");u.classList.add("loading");let d=w(n,s),f=document.querySelector(".js-shipping-result"),l=document.querySelector("template").content.firstElementChild,c=document.createElement("div");f.innerHTML="",fetch(d).then(i=>i.json()).then(i=>{let p=i.shipping_rates,y=theme.strings.notFoundShippingRate;p&&p.length>1?y=theme.strings.manyShippingRate.replace("{{ number }}",p.length):p&&p.length===1&&(y=theme.strings.oneShippingRate),document.querySelector(".js-response-title").innerHTML=y,p&&p.forEach(m=>{c.innerHTML=l.outerHTML,c.querySelector(".shipping-name").innerHTML=m.name,c.querySelector(".shipping-cost").textContent=m.price,f.insertAdjacentHTML("beforeend",c.innerHTML)}),u.classList.remove("loading")})})}window.addEventListener("DOMContentLoaded",function(){document.querySelector("body").addEventListener("click",async e=>{if(e.target.classList.contains("jsAddToCart")){e.preventDefault();let o={items:[{id:e.target.dataset.firstVariant,quantity:1}]};try{await E(o,!1)&&(it(),C(G(),500))}catch(r){console.log("Error:",r)}}if(e.target.classList.contains("jsQuickView")){e.preventDefault();let n=e.target.dataset.urlProductPopup;st(n)}})});async function it(){let e=document.querySelector(".jsCartPopup").dataset.sectionId,n=await X(e),o=document.createElement("div");o.innerHTML=n;let s=o.querySelector(".jsCartPopup").querySelectorAll(".jsPopupUpdate");document.querySelectorAll(".jsCartPopup .jsPopupUpdate").forEach((d,f)=>{d.parentNode.replaceChild(s[f],d)}),k(!1),b()}async function st(t){let n=await(await fetch(t)).text(),o=document.createElement("div");o.innerHTML=n;let r=document.querySelector("#popup-product-item .popup-content .content"),s=o.querySelector(".dialog__quick-view");r.innerHTML="",r.appendChild(s);let u=t.split("?")[0];$(u,r),K()}})();
