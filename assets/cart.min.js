(()=>{function S(e,a){let o=document.createElement("div");o.innerHTML=e;let r=document.querySelector(`li.cart__item.jsLineItem[data-line-index="${a}"]`),s=o.querySelector(`li.cart__item.jsLineItem[data-line-index="${a}"]`),f=r.querySelectorAll(".jsLineUpdate"),d=s.querySelectorAll(".jsLineUpdate");f.forEach((p,_)=>{p.parentNode.replaceChild(d[_],p)})}function v(e){fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:e})})}async function g(e){let{variantId:a,newQuantity:o,sectionId:r}=e;return await(await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,quantity:o,sections:r})})).json()}function x(e="",a={},o){let r=new URLSearchParams(a);return o&&typeof o=="function"&&o(r),e?e+"?"+r.toString():window.location.pathname+"?"+r.toString()}function L(e,a,o=!0){e&&(e(),o&&document.addEventListener("shopify:section:load",r=>{r.detail.sectionId===a&&e()}))}function I(e,a){var o=null;return function(){clearTimeout(o);var r=arguments,s=this;o=setTimeout(function(){e.apply(s,r)},a)}}var w=document.querySelector(".cart-section-wrapper").dataset.sectionId;L(A,w);function A(){let e=document.querySelectorAll(".cart__item .remove__qlt"),a=document.querySelectorAll(".cart__item .add__qlt");function o(t,n,c){return t=parseInt(t),n=parseInt(n),c=parseInt(c),Math.max(Math.min(t,n),c)}function r(t=[],n){!t||t.length===0||!n||typeof n!="function"||t.forEach(c=>{let i=null;c.addEventListener("click",l=>{let y=l.target.closest(".cart__item.jsLineItem").dataset.lineIndex,u=document.querySelector(`.cart__item.jsLineItem[data-line-index="${y}"] .quantity__input`);i&&clearTimeout(i),i=setTimeout(async()=>{let h=u.value,m=u.getAttribute("data-sections"),C={variantId:u.getAttribute("data-key"),newQuantity:h,sectionId:m};try{let E=(await g(C)).sections[m];S(E,y)}catch(j){}},1e3)})})}r([...a,...e],t=>t+1),r(e,t=>t-1),document.querySelectorAll(".cart__item .quantity__input").forEach(function(t){t.addEventListener("keydown",function(n){n.key==="Enter"&&n.preventDefault()}),t.addEventListener("input",I(async n=>{let c=n.target.closest(".cart__item.jsLineItem").dataset.lineIndex,i=n.target,l=o(i.value,i.getAttribute("max"),i.getAttribute("min"));i.value=l;let u={variantId:i.getAttribute("data-key"),newQuantity:l,sectionId:w};try{let m=(await g(u)).sections[w];S(m,c)}catch(h){}},2e3))}),document.querySelectorAll(".accordion-initialized").forEach(function(t){let n=t.querySelector(".accordion-trigger"),c=t.querySelector(".cart__form-note");n.addEventListener("click",function(){c.classList.toggle("active")})});let d=document.getElementById("cart-note"),p=I(()=>v(d.value),2e3);d.addEventListener("input",p);let q=document.querySelector(".jsShippingRates").dataset.url;document.querySelector(".shipping-form").addEventListener("submit",t=>{t.preventDefault();let n=Object.fromEntries(new FormData(t.target).entries()),c=x(q,n);fetch(c).then(i=>{console.log("check",i)})})}})();
