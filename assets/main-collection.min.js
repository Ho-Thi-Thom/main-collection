(()=>{var q=document.querySelector("#infinity_point"),I=document.querySelector("#sort_by"),b=document.querySelector("#show"),v=document.querySelectorAll('input[type="checkbox"]'),$=document.querySelectorAll('input[type="number"]'),j=document.querySelectorAll(".paginate_link[data-url]"),{loading:k,createUrl:P,hiddenLoading:F,getApi:y,appendProduct:N,setProduct:S,updateCount:O,updatePointInfinity:_,updatePaginate:E,createUrlFilter:R}=x();if(q){let e=new IntersectionObserver(r=>{r.forEach(i=>{if(i.isIntersecting){let d=function(u){u.set("section_id",n)};var o=d;let c=i.target,a=c.dataset.url,n=c.dataset.sectionId,p=P(d,a.split("?")[1]);k(c),y(p).then(u=>{let f=u.getElementPointInfinity();N(u.getElementProduct()),_(f),f.dataset.url||e.disconnect()}).finally(()=>{F(c)})}})});e.observe(q)}I&&I.addEventListener("change",e=>{let r=e.target.value,i=e.target.dataset.sectionId;function o(a){a.set("sort_by",r)}let c=P(o,window.location.href.split("?")[1]);history.pushState(null,null,c),y(c).then(a=>{S(a.getElementProduct())})});b&&b.addEventListener("change",e=>{let r=e.target.value,i=e.target.dataset.sectionId,o=`${window.Shopify.routes.root}cart/update.js`,c={attributes:{items_per_page:r},sections:[i]},a={method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}};function n(u){return u.json().then(f=>f.sections[i])}function d(u){u.set("items_per_page",r)}let p=P(d,window.location.href.split("?")[1]);history.pushState(null,null,p),y(o,a,n).then(u=>{S(u.getElementProduct()),_(u.getElementPointInfinity()),E(u.getPaginate())})});v&&v.forEach(e=>{e.addEventListener("change",r=>{let i=r.target.value,o=r.target.name;function c(n){r.target.checked?(n[o]||(n[o]=[]),n[o].push(i)):n[o]&&(n[o]=n[o].filter(d=>d!==i))}let a=R(c,window.location.search);history.pushState(null,null,a),y(a).then(n=>{S(n.getElementProduct()),O(n.getProductCount()),_(n.getElementPointInfinity()),E(n.getPaginate())})})});L(j);function L(e){e&&e.forEach(r=>{r.addEventListener("click",i=>{let o=i.target,c=o.dataset.url,a=o.dataset.sectionId;function n(p){p.set("section_id",a)}let d=P(n,c.split("?")[1]);y(d).then(p=>{S(p.getElementProduct()),E(p.getPaginate())})})})}function x(){let e=document.querySelector("#collection__products"),r=document.querySelector(".product_count"),i=document.querySelector("#infinity_point"),o=document.querySelector(".paginate");function c(t){t.innerHTML="Loading..."}function a(t){t.innerHTML=""}function n(t,l){let g=new URLSearchParams(l);return t(g),window.location.pathname+"?"+g.toString()}function d(t,l){let g=new URLSearchParams(l),s={};g.forEach(function(m,h){s[h]||(s[h]=[]),s[h].push(m)}),t(s);let w=new URLSearchParams;return Object.keys(s).forEach(m=>{s[m].forEach(h=>{w.append(m,h)})}),`${window.location.pathname}?${w.toString()}`}function p(t,l,g){return fetch(t,l).then(s=>g?.(s)??s.text()).then(s=>T(s))}function u(t){t.querySelectorAll("#collection__products > *")?.forEach(l=>{e?.appendChild(l)})}function f(t){e&&(e.parentNode.replaceChild(t,e),e=document.querySelector("#collection__products"))}function C(t){r&&(r.parentNode.replaceChild(t,r),r=document.querySelector(".product_count"))}function U(t){i&&i.setAttribute("data-url",t.dataset.url)}function A(t){o&&(o.parentNode.replaceChild(t,o),o=document.querySelector(".paginate"),L(document.querySelectorAll(".paginate_link[data-url]")))}function T(t){let l=document.createElement("div");return l.innerHTML=t,{getElementProduct(){return l.querySelector("#collection__products")},getProductCount(){return l.querySelector(".product_count")},getElementPointInfinity(){return l.querySelector("#infinity_point")},getPaginate(){return l.querySelector(".paginate")}}}return{loading:c,hiddenLoading:a,getApi:p,appendProduct:u,setProduct:f,updateCount:C,updatePointInfinity:U,createUrl:n,updatePaginate:A,createUrlFilter:d}}})();
