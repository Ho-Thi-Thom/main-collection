(()=>{function b(){function n(e){e.innerHTML="Loading..."}function c(e){e.innerHTML=""}function i(e,o){let a=new URLSearchParams(o);return e(a),window.location.pathname+"?"+a.toString()}function l(e,o){let a=new URLSearchParams(o),h={};a.forEach(function(_,y){h[y]||(h[y]=[]),h[y].push(_)}),e(h);let I=new URLSearchParams;return Object.keys(h).forEach(_=>{h[_].forEach(y=>{I.append(_,y)})}),`${window.location.pathname}?${I.toString()}`}function r(e,o){return fetch(e,o).then(a=>a.text()).then(a=>M(a))}function t(e){let o=document.querySelector("#collection__products");e.querySelectorAll("#collection__products > *")?.forEach(a=>{o?.appendChild(a)})}function s(e){let o=document.querySelector("#collection__products");e&&(o.parentNode.replaceChild(e,o),o=e)}function u(e){let o=document.querySelector(".product_count");e&&o.parentNode.replaceChild(e,o)}function d(e){let o=document.querySelector(".collection__toolbar-filter-showing");e&&o.parentNode.replaceChild(e,o)}function f(e,o){let a=document.querySelector("#infinity_point");e&&(a.parentNode.replaceChild(e,a),o(e))}function v(e,o){let a=document.querySelector(".paginate");e&&(a.parentNode.replaceChild(e,a),o(document.querySelectorAll(".paginate_link[data-url]")))}function M(e){let o=document.createElement("div");return o.innerHTML=e,{getElementProduct(){return o.querySelector("#collection__products")},getProductCount(){return o.querySelector(".product_count")},getElementPointInfinity(){return o.querySelector("#infinity_point")},getPaginate(){return o.querySelector(".paginate")},getElementShowing(){return o.querySelector(".collection__toolbar-filter-showing")}}}return{loading:n,hiddenLoading:c,getApi:r,appendProduct:t,setProduct:s,updateCount:u,updateShowing:d,updatePointInfinity:f,createUrl:i,updatePaginate:v,createUrlFilter:l}}var R=document.querySelector("#infinity_point"),L=document.querySelector("#sort_by"),A=document.querySelector("#show"),C=document.querySelectorAll('input[type="checkbox"]'),N=document.querySelectorAll('input[type="number"]'),O=document.querySelectorAll(".paginate_link[data-url]"),z=document.querySelector(".collection__toolbar-filter-showing"),{loading:$,createUrl:q,hiddenLoading:j,getApi:g,appendProduct:H,setProduct:S,updateCount:U,updateShowing:m,updatePointInfinity:E,updatePaginate:w,createUrlFilter:x}=b();p(R);function p(n){if(n){let c=new IntersectionObserver(i=>{i.forEach(l=>{if(l.isIntersecting){let u=function(f){f.set("section_id",s)},r=l.target,t=r.dataset.url,s=r.dataset.sectionId,d=t?q(u,t.split("?")[1]):null;if(d==null){c.disconnect();return}$(r),g(d).then(f=>{let v=f.getElementPointInfinity();H(f.getElementProduct()),E(v,p),m(f.getElementShowing())}).finally(()=>{j(r)})}})});c.observe(n)}}function F(n){let c=n.target.value,i=n.target.dataset.sectionId;function l(t){t.set("sort_by",c)}let r=q(l,window.location.href.split("?")[1]);history.pushState(null,null,r),r+=r.includes("?")?"&":"?",r+=`section_id=${i}`,g(r).then(t=>{S(t.getElementProduct()),E(t.getElementPointInfinity(),p),m(t.getElementShowing())})}L&&L.addEventListener("change",F);A&&A.addEventListener("change",n=>{let c=n.target.value,i=n.target.dataset.sectionId,l=`${window.Shopify.routes.root}cart/update.js`,r={attributes:{items_per_page:c},sections:[i],section_url:location.pathname+location.search},t={method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}};g(l,t).then(()=>{let s=location.pathname;s+=location.search,s+=location.search.includes("?")?"&":"?",s+="section_id="+i,g(s).then(u=>{S(u.getElementProduct()),E(u.getElementPointInfinity(),p),w(u.getPaginate(),P),m(u.getElementShowing())})})});function k(n){let c=n.target.value,i=n.target.name;function l(t){n.target.checked?(t[i]||(t[i]=[]),t[i].push(c)):t[i]&&(t[i]=t[i].filter(s=>s!==c))}let r=x(l,window.location.search);history.pushState(null,null,r),g(r).then(t=>{S(t.getElementProduct()),U(t.getProductCount()),w(t.getPaginate(),P),m(t.getElementShowing()),E(t.getElementPointInfinity(),p)})}C&&C.forEach(n=>{n.addEventListener("change",k)});function T(n,c){let i=n.target.value,l=n.target.name,r=n.target.dataset.max;c["filter.v.price.lte"]=r,c[l]=i;function t(u){for(let d in c)u[d]=[],u[d].push(c[d])}let s=x(t,window.location.search);history.pushState(null,null,s),g(s).then(u=>{S(u.getElementProduct()),U(u.getProductCount()),E(u.getElementPointInfinity(),p),w(u.getPaginate(),P),m(u.getElementShowing())})}if(N){let n={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};N.forEach(c=>{c.addEventListener("change",i=>T(i,n))})}P(O);function P(n){n&&n.forEach(c=>{c.addEventListener("click",i=>{let l=i.target,r=l.dataset.url,t=l.dataset.sectionId;function s(d){d.set("section_id",t)}let u=q(s,r.split("?")[1]);g(u).then(d=>{S(d.getElementProduct()),w(d.getPaginate(),P),m(d.getElementShowing())})})})}document.addEventListener("shopify:section:load",()=>{p(document.querySelector("#infinity_point"));let n=document.querySelector("#sort_by");n&&n.addEventListener("change",F);let c=document.querySelectorAll('input[type="checkbox"]');c&&c.forEach(l=>{l.addEventListener("change",k)});let i=document.querySelectorAll('input[type="number"]');if(i){let l={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};i.forEach(r=>{r.addEventListener("change",t=>T(t,l))})}});})();
