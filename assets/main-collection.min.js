(()=>{function b(){function c(t){t.innerHTML="Loading..."}function r(t){t.innerHTML=""}function u(t,e){let f=new URLSearchParams(e);return t(f),window.location.pathname+"?"+f.toString()}function l(t,e){let f=new URLSearchParams(e),m={};f.forEach(function(w,P){m[P]||(m[P]=[]),m[P].push(w)}),t(m);let q=new URLSearchParams;return Object.keys(m).forEach(w=>{m[w].forEach(P=>{q.append(w,P)})}),`${window.location.pathname}?${q.toString()}`}function o(t,e){return fetch(t,e).then(f=>f.text()).then(f=>k(f))}function a(t){let e=document.querySelector("#collection__products");t.querySelectorAll("#collection__products > *")?.forEach(f=>{e?.appendChild(f)})}function s(t){let e=document.querySelector("#collection__products");t&&(e.parentNode.replaceChild(t,e),e=t)}function d(t){let e=document.querySelector(".product_count");t&&e.parentNode.replaceChild(t,e)}function n(t){let e=document.querySelector(".collection__toolbar-filter-showing");t&&e.parentNode.replaceChild(t,e)}function i(t,e){let f=document.querySelector("#infinity_point");t&&(f.parentNode.replaceChild(t,f),e(t))}function g(t,e){let f=document.querySelector(".paginate");t&&(f.parentNode.replaceChild(t,f),e(document.querySelectorAll(".paginate_link[data-url]")))}function k(t){let e=document.createElement("div");return e.innerHTML=t,{getElementProduct(){return e.querySelector("#collection__products")},getProductCount(){return e.querySelector(".product_count")},getElementPointInfinity(){return e.querySelector("#infinity_point")},getPaginate(){return e.querySelector(".paginate")},getElementShowing(){return e.querySelector(".collection__toolbar-filter-showing")}}}return{loading:c,hiddenLoading:r,getApi:o,appendProduct:a,setProduct:s,updateCount:d,updateShowing:n,updatePointInfinity:i,createUrl:u,updatePaginate:g,createUrlFilter:l}}var{loading:F,createUrl:v,hiddenLoading:$,getApi:p,appendProduct:M,setProduct:E,updateCount:L,updateShowing:y,updatePointInfinity:_,updatePaginate:I,createUrlFilter:C}=b();function h(c){if(c){let r=new IntersectionObserver(u=>{u.forEach(l=>{if(l.isIntersecting){let d=function(i){i.set("section_id",s)},o=l.target,a=o.dataset.url,s=o.dataset.sectionId,n=a?v(d,a.split("?")[1]):null;if(n==null){r.disconnect();return}F(o),p(n).then(i=>{let g=i.getElementPointInfinity();M(i.getElementProduct()),_(g,h),y(i.getElementShowing())}).finally(()=>{$(o)})}})});r.observe(c)}}function x(c){c&&c.addEventListener("change",r=>{let u=r.target.value,l=r.target.dataset.sectionId;function o(s){s.set("sort_by",u)}let a=v(o,window.location.href.split("?")[1]);history.pushState(null,null,a),a+=a.includes("?")?"&":"?",a+=`section_id=${l}`,p(a).then(s=>{E(s.getElementProduct()),_(s.getElementPointInfinity(),h),y(s.getElementShowing())})})}function U(c){c&&c.addEventListener("change",r=>{let u=r.target.value,l=r.target.dataset.sectionId,o=`${window.Shopify.routes.root}cart/update.js`,a={attributes:{items_per_page:u},sections:[l],section_url:location.pathname+location.search},s={method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}};p(o,s).then(()=>{let d=location.pathname;d+=location.search,d+=location.search.includes("?")?"&":"?",d+="section_id="+l,p(d).then(n=>{E(n.getElementProduct()),_(n.getElementPointInfinity(),h),I(n.getPaginate(),S),y(n.getElementShowing())})})})}async function A(c){c&&c.forEach(r=>{r.addEventListener("change",async u=>{let l=u.target.value,o=u.target.name,a=u.target.dataset.sectionId;try{let d=C(function(i){u.target.checked?(i[o]||(i[o]=[]),i[o].push(l)):i[o]&&(i[o]=i[o].filter(g=>g!==l))},window.location.search);history.pushState(null,null,d),d+=d.includes("?")?"&":"?",d+=`section_id=${a}`;let n=await p(d);E(n.getElementProduct()),L(n.getProductCount()),I(n.getPaginate(),S),y(n.getElementShowing()),_(n.getElementPointInfinity(),h)}catch(s){console.error(s)}})})}function N(c){if(c){let r={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};c.forEach(u=>{u.addEventListener("change",l=>{let o=l.target.value,a=l.target.name,s=l.target.dataset.max;r["filter.v.price.lte"]=s,r[a]=o;function d(i){for(let g in r)i[g]=[],i[g].push(r[g])}let n=C(d,window.location.search);history.pushState(null,null,n),p(n).then(i=>{E(i.getElementProduct()),L(i.getProductCount()),_(i.getElementPointInfinity(),h),I(i.getPaginate(),S),y(i.getElementShowing())})})})}}function S(c){c&&c.forEach(r=>{r.addEventListener("click",u=>{let l=u.currentTarget,o=l.dataset.url,a=l.dataset.sectionId;function s(n){n.set("section_id",a)}let d=v(s,o.split("?")[1]);p(d).then(n=>{E(n.getElementProduct()),I(n.getPaginate(),S),y(n.getElementShowing())})})})}T();document.addEventListener("shopify:section:load",T);function T(){let c=document.querySelector("#infinity_point"),r=document.querySelector("#sort_by"),u=document.querySelectorAll('input[type="checkbox"]'),l=document.querySelectorAll('input[type="number"]'),o=document.querySelectorAll(".paginate_link[data-url]"),a=document.querySelector("#show");h(c),x(r),A(u),N(l),S(o),U(a)}})();
