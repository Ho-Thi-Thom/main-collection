(()=>{function v(){function i(t){t.innerHTML="Loading..."}function r(t){t.innerHTML=""}function a(t,e){let f=new URLSearchParams(e);return t(f),window.location.pathname+"?"+f.toString()}function c(t,e){let f=new URLSearchParams(e),m={};f.forEach(function(b,w){m[w]||(m[w]=[]),m[w].push(b)}),t(m);let U=new URLSearchParams;return Object.keys(m).forEach(b=>{m[b].forEach(w=>{U.append(b,w)})}),`${window.location.pathname}?${U.toString()}`}function o(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function l(t,e){return fetch(t,e).then(f=>f.text()).then(f=>E(f))}function u(t){let e=document.querySelector("#collection__products");t.querySelectorAll("#collection__products > *")?.forEach(f=>{e?.appendChild(f)})}function s(t){let e=document.querySelector("#collection__products");t&&(e.parentNode.replaceChild(t,e),e=t)}function n(t){let e=document.querySelector(".product_count");t&&e.parentNode.replaceChild(t,e)}function d(t){let e=document.querySelector(".collection__toolbar-filter-showing");t&&e.parentNode.replaceChild(t,e)}function g(t,e){let f=document.querySelector("#infinity_point");t&&(f.parentNode.replaceChild(t,f),e(t))}function p(t,e){let f=document.querySelector(".paginate");t&&(f.parentNode.replaceChild(t,f),e(document.querySelectorAll(".paginate_link[data-url]")))}function E(t){let e=document.createElement("div");return e.innerHTML=t,{getElementProduct(){return e.querySelector("#collection__products")},getProductCount(){return e.querySelector(".product_count")},getElementPointInfinity(){return e.querySelector("#infinity_point")},getPaginate(){return e.querySelector(".paginate")},getElementShowing(){return e.querySelector(".collection__toolbar-filter-showing")}}}return{loading:i,hiddenLoading:r,getApi:l,appendProduct:u,setProduct:s,updateCount:n,updateShowing:d,updatePointInfinity:g,createUrl:a,updatePaginate:p,createUrlFilter:c,updateUrl:o}}var{loading:O,createUrl:L,hiddenLoading:R,getApi:h,appendProduct:$,setProduct:_,updateCount:x,updateShowing:S,updatePointInfinity:I,updatePaginate:q,createUrlFilter:A,updateUrl:C}=v();function y(i){if(i){let r=new IntersectionObserver(a=>{a.forEach(c=>{if(c.isIntersecting){let o=c.target,l=o.dataset.url,u=o.dataset.sectionId;try{let n=l?L(function(d){d.set("section_id",u)},l.split("?")[1]):null;if(n==null){r.disconnect();return}O(o),h(n).then(d=>{let g=d.getElementPointInfinity();$(d.getElementProduct()),I(g,y),S(d.getElementShowing())}).finally(()=>{R(o)})}catch(s){console.error(s)}}})});r.observe(i)}}function k(i){i&&i.addEventListener("change",r=>{let a=r.target.value,c=r.target.dataset.sectionId;function o(u){u.set("sort_by",a)}let l=L(o,window.location.href.split("?")[1]);history.pushState(null,null,l),l=C(l,c),h(l).then(u=>{_(u.getElementProduct()),I(u.getElementPointInfinity(),y),S(u.getElementShowing())})})}function N(i){i&&i.addEventListener("change",r=>{let a=r.target.value,c=r.target.dataset.sectionId,o=`${window.Shopify.routes.root}cart/update.js`,l={attributes:{items_per_page:a},sections:[c],section_url:location.pathname+location.search},u={method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}};h(o,u).then(()=>{let s=location.pathname;s+=location.search,s+=location.search.includes("?")?"&":"?",s+="section_id="+c,h(s).then(n=>{_(n.getElementProduct()),I(n.getElementPointInfinity(),y),q(n.getPaginate(),P),S(n.getElementShowing())})})})}async function T(i){i&&i.forEach(r=>{r.addEventListener("change",async a=>{let c=a.target.value,o=a.target.name,l=a.target.dataset.sectionId;try{let s=A(function(d){a.target.checked?(d[o]||(d[o]=[]),d[o].push(c)):d[o]&&(d[o]=d[o].filter(g=>g!==c))},window.location.search);history.pushState(null,null,s),s=C(s,l);let n=await h(s);_(n.getElementProduct()),x(n.getProductCount()),q(n.getPaginate(),P),S(n.getElementShowing()),I(n.getElementPointInfinity(),y)}catch(u){console.error(u)}})})}function F(i){if(i){let r={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};i.forEach(a=>{a.addEventListener("change",c=>{let o=c.target.value,l=c.target.name,u=c.target.dataset.max,s=c.target.dataset.sectionId;r["filter.v.price.lte"]=u,r[l]=o;try{let d=A(function(p){for(let E in r)p[E]=[],p[E].push(r[E])},window.location.search);history.pushState(null,null,d);let g=C(d,s);h(g).then(p=>{_(p.getElementProduct()),x(p.getProductCount()),I(p.getElementPointInfinity(),y),q(p.getPaginate(),P),S(p.getElementShowing())})}catch(n){console.error(n)}})})}}function P(i){i&&i.forEach(r=>{r.addEventListener("click",a=>{let c=a.currentTarget,o=c.dataset.url,l=c.dataset.sectionId;function u(n){n.set("section_id",l)}let s=L(u,o.split("?")[1]);h(s).then(n=>{_(n.getElementProduct()),q(n.getPaginate(),P),S(n.getElementShowing())})})})}M();document.addEventListener("shopify:section:load",M);function M(){let i=document.querySelector("#infinity_point"),r=document.querySelector("#sort_by"),a=document.querySelectorAll('input[type="checkbox"]'),c=document.querySelectorAll('input[type="number"]'),o=document.querySelectorAll(".paginate_link[data-url]"),l=document.querySelector("#show");y(i),k(r),T(a),F(c),P(o),N(l)}})();
