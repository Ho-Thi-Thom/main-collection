(()=>{function v(){let e=document.querySelector("#collection__products"),u=document.querySelector(".product_count"),r=document.querySelector(".collection__toolbar-filter-showing"),n=document.querySelector("#infinity_point"),o=document.querySelector(".paginate");function l(t){t.innerHTML="Loading..."}function i(t){t.innerHTML=""}function s(t,a){let f=new URLSearchParams(a);return t(f),window.location.pathname+"?"+f.toString()}function c(t,a){let f=new URLSearchParams(a),g={};f.forEach(function(w,y){g[y]||(g[y]=[]),g[y].push(w)}),t(g);let I=new URLSearchParams;return Object.keys(g).forEach(w=>{g[w].forEach(y=>{I.append(w,y)})}),`${window.location.pathname}?${I.toString()}`}function d(t,a,f){return fetch(t,a).then(g=>f?.(g)??g.text()).then(g=>O(g))}function b(t){t.querySelectorAll("#collection__products > *")?.forEach(a=>{e?.appendChild(a)})}function T(t){t&&(e.parentNode.replaceChild(t,e),e=t)}function k(t){t&&(u.parentNode.replaceChild(t,u),u=t)}function R(t){t&&(r.parentNode.replaceChild(t,r),r=t)}function j(t,a){t&&(n.parentNode.replaceChild(t,n),n=t,a(t))}function M(t,a){t&&(o.parentNode.replaceChild(t,o),o=t,a(document.querySelectorAll(".paginate_link[data-url]")))}function O(t){let a=document.createElement("div");return a.innerHTML=t,{getElementProduct(){return a.querySelector("#collection__products")},getProductCount(){return a.querySelector(".product_count")},getElementPointInfinity(){return a.querySelector("#infinity_point")},getPaginate(){return a.querySelector(".paginate")},getElementShowing(){return a.querySelector(".collection__toolbar-filter-showing")}}}return{loading:l,hiddenLoading:i,getApi:d,appendProduct:b,setProduct:T,updateCount:k,updateShowing:R,updatePointInfinity:j,createUrl:s,updatePaginate:M,createUrlFilter:c}}function L(){console.log("abc")}var $=document.querySelector("#infinity_point"),C=document.querySelector("#sort_by"),x=document.querySelector("#show"),A=document.querySelectorAll('input[type="checkbox"]'),U=document.querySelectorAll('input[type="number"]'),H=document.querySelectorAll(".paginate_link[data-url]"),Y=document.querySelector(".collection__toolbar-filter-showing"),{loading:B,createUrl:q,hiddenLoading:G,getApi:p,appendProduct:J,setProduct:S,updateCount:N,updateShowing:h,updatePointInfinity:P,updatePaginate:_,createUrlFilter:F}=v();L();m($);function m(e){if(e){let u=new IntersectionObserver(r=>{r.forEach(n=>{if(n.isIntersecting){let s=function(d){d.set("section_id",i)},o=n.target,l=o.dataset.url,i=o.dataset.sectionId,c=l?q(s,l.split("?")[1]):null;if(c==null){u.disconnect();return}B(o),p(c).then(d=>{let b=d.getElementPointInfinity();J(d.getElementProduct()),P(b,m),h(d.getElementShowing())}).finally(()=>{G(o)})}})});u.observe(e)}}C&&C.addEventListener("change",e=>{let u=e.target.value,r=e.target.dataset.sectionId;function n(l){l.set("sort_by",u)}let o=q(n,window.location.href.split("?")[1]);history.pushState(null,null,o),o+=o.includes("?")?"&":"?",o+=`section_id=${r}`,p(o).then(l=>{S(l.getElementProduct()),P(l.getElementPointInfinity(),m),h(l.getElementShowing())})});x&&x.addEventListener("change",e=>{let u=e.target.value,r=e.target.dataset.sectionId,n=`${window.Shopify.routes.root}cart/update.js`,o={attributes:{items_per_page:u},sections:[r]},l={method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}};function i(s){return s.json().then(c=>c.sections[r])}p(n,l,i).then(s=>{S(s.getElementProduct()),P(s.getElementPointInfinity(),m),_(s.getPaginate(),E),h(s.getElementShowing())})});A&&A.forEach(e=>{e.addEventListener("change",u=>{let r=u.target.value,n=u.target.name;function o(i){u.target.checked?(i[n]||(i[n]=[]),i[n].push(r)):i[n]&&(i[n]=i[n].filter(s=>s!==r))}let l=F(o,window.location.search);history.pushState(null,null,l),p(l).then(i=>{S(i.getElementProduct()),N(i.getProductCount()),_(i.getPaginate(),E),h(i.getElementShowing()),P(i.getElementPointInfinity(),m)})})});if(U){let e={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};U.forEach(u=>{u.addEventListener("change",r=>{let n=r.target.value,o=r.target.name,l=r.target.dataset.max;e["filter.v.price.lte"]=l,e[o]=n;function i(c){for(let d in e)c[d]=[],c[d].push(e[d])}let s=F(i,window.location.search);history.pushState(null,null,s),p(s).then(c=>{S(c.getElementProduct()),N(c.getProductCount()),P(c.getElementPointInfinity(),m),_(c.getPaginate(),E),h(c.getElementShowing())})})})}E(H);function E(e){e&&e.forEach(u=>{u.addEventListener("click",r=>{let n=r.target,o=n.dataset.url,l=n.dataset.sectionId;function i(c){c.set("section_id",l)}let s=q(i,o.split("?")[1]);p(s).then(c=>{S(c.getElementProduct()),_(c.getPaginate(),E),h(c.getElementShowing())})})})}})();
