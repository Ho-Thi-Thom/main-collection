(()=>{var M=document.querySelector("#infinity_point"),I=document.querySelector("#sort_by"),v=document.querySelector("#show"),L=document.querySelectorAll('input[type="checkbox"]'),C=document.querySelectorAll('input[type="number"]'),O=document.querySelectorAll(".paginate_link[data-url]"),z=document.querySelector(".collection__toolbar-filter-showing"),{loading:$,createUrl:q,hiddenLoading:H,getApi:h,appendProduct:B,setProduct:S,updateCount:A,updateShowing:m,updatePointInfinity:P,updatePaginate:E,createUrlFilter:U}=G();N(M);function N(t){if(t){let l=new IntersectionObserver(c=>{c.forEach(e=>{if(e.isIntersecting){let r=function(f){f.set("section_id",a)};var u=r;let i=e.target,n=i.dataset.url,a=i.dataset.sectionId,g=n?q(r,n.split("?")[1]):null;if(g==null){l.disconnect();return}$(i),h(g).then(f=>{let w=f.getElementPointInfinity();B(f.getElementProduct()),P(w),m(f.getElementShowing())}).finally(()=>{H(i)})}})});l.observe(t)}}I&&I.addEventListener("change",t=>{let l=t.target.value,c=t.target.dataset.sectionId;function e(i){i.set("sort_by",l)}let u=q(e,window.location.href.split("?")[1]);history.pushState(null,null,u),u+=u.includes("?")?"&":"?",u+=`section_id=${c}`,h(u).then(i=>{S(i.getElementProduct()),P(i.getElementPointInfinity()),m(i.getElementShowing())})});v&&v.addEventListener("change",t=>{let l=t.target.value,c=t.target.dataset.sectionId,e=`${window.Shopify.routes.root}cart/update.js`,u={attributes:{items_per_page:l},sections:[c]},i={method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}};function n(a){return a.json().then(r=>r.sections[c])}h(e,i,n).then(a=>{S(a.getElementProduct()),P(a.getElementPointInfinity()),E(a.getPaginate()),m(a.getElementShowing())})});L&&L.forEach(t=>{t.addEventListener("change",l=>{let c=l.target.value,e=l.target.name;function u(n){l.target.checked?(n[e]||(n[e]=[]),n[e].push(c)):n[e]&&(n[e]=n[e].filter(a=>a!==c))}let i=U(u,window.location.search);history.pushState(null,null,i),h(i).then(n=>{S(n.getElementProduct()),A(n.getProductCount()),P(n.getElementPointInfinity()),E(n.getPaginate()),m(n.getElementShowing())})})});if(C){let t={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};C.forEach(l=>{l.addEventListener("change",c=>{let e=c.target.value,u=c.target.name,i=c.target.dataset.max;t["filter.v.price.lte"]=i,t[u]=e;function n(r){for(let g in t)r[g]=[],r[g].push(t[g])}let a=U(n,window.location.search);history.pushState(null,null,a),h(a).then(r=>{S(r.getElementProduct()),A(r.getProductCount()),P(r.getElementPointInfinity()),E(r.getPaginate()),m(r.getElementShowing())})})})}F(O);function F(t){t&&t.forEach(l=>{l.addEventListener("click",c=>{let e=c.target,u=e.dataset.url,i=e.dataset.sectionId;function n(r){r.set("section_id",i)}let a=q(n,u.split("?")[1]);h(a).then(r=>{S(r.getElementProduct()),E(r.getPaginate()),m(r.getElementShowing())})})})}function G(){let t=document.querySelector("#collection__products"),l=document.querySelector(".product_count"),c=document.querySelector(".collection__toolbar-filter-showing"),e=document.querySelector("#infinity_point"),u=document.querySelector(".paginate");function i(o){o.innerHTML="Loading..."}function n(o){o.innerHTML=""}function a(o,s){let p=new URLSearchParams(s);return o(p),window.location.pathname+"?"+p.toString()}function r(o,s){let p=new URLSearchParams(s),d={};p.forEach(function(_,y){d[y]||(d[y]=[]),d[y].push(_)}),o(d);let b=new URLSearchParams;return Object.keys(d).forEach(_=>{d[_].forEach(y=>{b.append(_,y)})}),`${window.location.pathname}?${b.toString()}`}function g(o,s,p){return fetch(o,s).then(d=>p?.(d)??d.text()).then(d=>k(d))}function f(o){o.querySelectorAll("#collection__products > *")?.forEach(s=>{t?.appendChild(s)})}function w(o){t&&(t.parentNode.replaceChild(o,t),t=document.querySelector("#collection__products"))}function T(o){l&&(l.parentNode.replaceChild(o,l),l=document.querySelector(".product_count"))}function x(o){c&&(c.parentNode.replaceChild(o,c),c=document.querySelector(".collection__toolbar-filter-showing"))}function R(o){e&&(e.parentNode.replaceChild(o,e),e=document.querySelector("#infinity_point"),N(document.querySelector("#infinity_point")))}function j(o){u&&(u.parentNode.replaceChild(o,u),u=document.querySelector(".paginate"),F(document.querySelectorAll(".paginate_link[data-url]")))}function k(o){let s=document.createElement("div");return s.innerHTML=o,{getElementProduct(){return s.querySelector("#collection__products")},getProductCount(){return s.querySelector(".product_count")},getElementPointInfinity(){return s.querySelector("#infinity_point")},getPaginate(){return s.querySelector(".paginate")},getElementShowing(){return s.querySelector(".collection__toolbar-filter-showing")}}}return{loading:i,hiddenLoading:n,getApi:g,appendProduct:f,setProduct:w,updateCount:T,updateShowing:x,updatePointInfinity:R,createUrl:a,updatePaginate:j,createUrlFilter:r}}})();
