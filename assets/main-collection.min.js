(()=>{function b(){function e(n){n.innerHTML="Loading..."}function c(n){n.innerHTML=""}function r(n,o){let s=new URLSearchParams(o);return n(s),window.location.pathname+"?"+s.toString()}function u(n,o){let s=new URLSearchParams(o),h={};s.forEach(function(P,y){h[y]||(h[y]=[]),h[y].push(P)}),n(h);let L=new URLSearchParams;return Object.keys(h).forEach(P=>{h[P].forEach(y=>{L.append(P,y)})}),`${window.location.pathname}?${L.toString()}`}function i(n,o){return fetch(n,o).then(s=>s.text()).then(s=>R(s))}function t(n){let o=document.querySelector("#collection__products");n.querySelectorAll("#collection__products > *")?.forEach(s=>{o?.appendChild(s)})}function l(n){let o=document.querySelector("#collection__products");n&&(o.parentNode.replaceChild(n,o),o=n)}function a(n){let o=document.querySelector(".product_count");n&&o.parentNode.replaceChild(n,o)}function d(n){let o=document.querySelector(".collection__toolbar-filter-showing");n&&o.parentNode.replaceChild(n,o)}function f(n,o){let s=document.querySelector("#infinity_point");n&&(s.parentNode.replaceChild(n,s),o(n))}function v(n,o){let s=document.querySelector(".paginate");n&&(s.parentNode.replaceChild(n,s),o(document.querySelectorAll(".paginate_link[data-url]")))}function R(n){let o=document.createElement("div");return o.innerHTML=n,{getElementProduct(){return o.querySelector("#collection__products")},getProductCount(){return o.querySelector(".product_count")},getElementPointInfinity(){return o.querySelector("#infinity_point")},getPaginate(){return o.querySelector(".paginate")},getElementShowing(){return o.querySelector(".collection__toolbar-filter-showing")}}}return{loading:e,hiddenLoading:c,getApi:i,appendProduct:t,setProduct:l,updateCount:a,updateShowing:d,updatePointInfinity:f,createUrl:r,updatePaginate:v,createUrlFilter:u}}var O=document.querySelector("#infinity_point"),I=document.querySelector("#sort_by"),A=document.querySelector("#show"),C=document.querySelectorAll('input[type="checkbox"]'),k=document.querySelectorAll('input[type="number"]'),$=document.querySelectorAll(".paginate_link[data-url]"),D=document.querySelector(".collection__toolbar-filter-showing"),{loading:j,createUrl:q,hiddenLoading:H,getApi:g,appendProduct:B,setProduct:S,updateCount:N,updateShowing:m,updatePointInfinity:E,updatePaginate:w,createUrlFilter:U}=b();p(O);function p(e){if(e){let c=new IntersectionObserver(r=>{r.forEach(u=>{if(u.isIntersecting){let a=function(f){f.set("section_id",l)},i=u.target,t=i.dataset.url,l=i.dataset.sectionId,d=t?q(a,t.split("?")[1]):null;if(d==null){c.disconnect();return}j(i),g(d).then(f=>{let v=f.getElementPointInfinity();B(f.getElementProduct()),E(v,p),m(f.getElementShowing())}).finally(()=>{H(i)})}})});c.observe(e)}}function x(e){let c=e.target.value,r=e.target.dataset.sectionId;function u(t){t.set("sort_by",c)}let i=q(u,window.location.href.split("?")[1]);history.pushState(null,null,i),i+=i.includes("?")?"&":"?",i+=`section_id=${r}`,g(i).then(t=>{S(t.getElementProduct()),E(t.getElementPointInfinity(),p),m(t.getElementShowing())})}I&&I.addEventListener("change",x);A&&A.addEventListener("change",e=>{let c=e.target.value,r=e.target.dataset.sectionId,u=`${window.Shopify.routes.root}cart/update.js`,i={attributes:{items_per_page:c},sections:[r],section_url:location.pathname+location.search},t={method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}};g(u,t).then(()=>{let l=location.pathname;l+=location.search,l+=location.search.includes("?")?"&":"?",l+="section_id="+r,g(l).then(a=>{S(a.getElementProduct()),E(a.getElementPointInfinity(),p),w(a.getPaginate(),_),m(a.getElementShowing())})})});function F(e){let c=e.target.value,r=e.target.name;function u(t){e.target.checked?(t[r]||(t[r]=[]),t[r].push(c)):t[r]&&(t[r]=t[r].filter(l=>l!==c))}let i=U(u,window.location.search);history.pushState(null,null,i),g(i).then(t=>{S(t.getElementProduct()),N(t.getProductCount()),w(t.getPaginate(),_),m(t.getElementShowing()),E(t.getElementPointInfinity(),p)})}C&&C.forEach(e=>{e.addEventListener("change",F)});function T(e,c){let r=e.target.value,u=e.target.name,i=e.target.dataset.max;c["filter.v.price.lte"]=i,c[u]=r;function t(a){for(let d in c)a[d]=[],a[d].push(c[d])}let l=U(t,window.location.search);history.pushState(null,null,l),g(l).then(a=>{S(a.getElementProduct()),N(a.getProductCount()),E(a.getElementPointInfinity(),p),w(a.getPaginate(),_),m(a.getElementShowing())})}if(k){let e={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};k.forEach(c=>{c.addEventListener("change",r=>T(r,e))})}_($);function M(e){let c=e.target,r=c.dataset.url,u=c.dataset.sectionId;function i(l){l.set("section_id",u)}let t=q(i,r.split("?")[1]);g(t).then(l=>{S(l.getElementProduct()),w(l.getPaginate(),_),m(l.getElementShowing())})}function _(e){e&&e.forEach(c=>{c.addEventListener("click",M)})}document.addEventListener("shopify:section:load",()=>{p(document.querySelector("#infinity_point"));let e=document.querySelector("#sort_by");e&&e.addEventListener("change",x);let c=document.querySelectorAll('input[type="checkbox"]');c&&c.forEach(i=>{i.addEventListener("change",F)});let r=document.querySelectorAll('input[type="number"]');if(r){let i={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};r.forEach(t=>{t.addEventListener("change",l=>T(l,i))})}let u=document.querySelectorAll(".paginate_link[data-url]");u&&u.forEach(i=>{i.addEventListener("click",M)})});})();
