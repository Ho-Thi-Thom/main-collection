(()=>{var R=document.querySelector("#infinity_point"),I=document.querySelector("#sort_by"),v=document.querySelector("#show"),b=document.querySelectorAll('input[type="checkbox"]'),L=document.querySelectorAll('input[type="number"]'),j=document.querySelectorAll(".paginate_link[data-url]"),{loading:k,createUrl:q,hiddenLoading:M,getApi:m,appendProduct:O,setProduct:y,updateCount:C,updatePointInfinity:P,updatePaginate:E,createUrlFilter:A}=$();U(R);function U(t){if(t){let c=new IntersectionObserver(i=>{i.forEach(e=>{if(e.isIntersecting){let u=function(p){p.set("section_id",l)};var a=u;let r=e.target,n=r.dataset.url,l=r.dataset.sectionId,f=n?q(u,n.split("?")[1]):null;if(f==null){c.disconnect();return}k(r),m(f).then(p=>{let _=p.getElementPointInfinity();O(p.getElementProduct()),P(_)}).finally(()=>{M(r)})}})});c.observe(t)}}I&&I.addEventListener("change",t=>{let c=t.target.value,i=t.target.dataset.sectionId;function e(r){r.set("sort_by",c)}let a=q(e,window.location.href.split("?")[1]);history.pushState(null,null,a),a+=a.includes("?")?"&":"?",a+=`section_id=${i}`,m(a).then(r=>{y(r.getElementProduct()),P(r.getElementPointInfinity())})});v&&v.addEventListener("change",t=>{let c=t.target.value,i=t.target.dataset.sectionId,e=`${window.Shopify.routes.root}cart/update.js`,a={attributes:{items_per_page:c},sections:[i]},r={method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}};function n(l){return l.json().then(u=>u.sections[i])}m(e,r,n).then(l=>{y(l.getElementProduct()),P(l.getElementPointInfinity()),E(l.getPaginate())})});b&&b.forEach(t=>{t.addEventListener("change",c=>{let i=c.target.value,e=c.target.name;function a(n){c.target.checked?(n[e]||(n[e]=[]),n[e].push(i)):n[e]&&(n[e]=n[e].filter(l=>l!==i))}let r=A(a,window.location.search);history.pushState(null,null,r),m(r).then(n=>{y(n.getElementProduct()),C(n.getProductCount()),P(n.getElementPointInfinity()),E(n.getPaginate())})})});if(L){let t={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};L.forEach(c=>{c.addEventListener("change",i=>{let e=i.target.value,a=i.target.name,r=i.target.dataset.max;t["filter.v.price.lte"]=r,t[a]=e;function n(u){for(let f in t)u[f]=[],u[f].push(t[f])}let l=A(n,window.location.search);history.pushState(null,null,l),m(l).then(u=>{y(u.getElementProduct()),C(u.getProductCount()),P(u.getElementPointInfinity()),E(u.getPaginate())})})})}N(j);function N(t){t&&t.forEach(c=>{c.addEventListener("click",i=>{let e=i.target,a=e.dataset.url,r=e.dataset.sectionId;function n(u){u.set("section_id",r)}let l=q(n,a.split("?")[1]);m(l).then(u=>{y(u.getElementProduct()),E(u.getPaginate())})})})}function $(){let t=document.querySelector("#collection__products"),c=document.querySelector(".product_count"),i=document.querySelector("#infinity_point"),e=document.querySelector(".paginate");function a(o){o.innerHTML="Loading..."}function r(o){o.innerHTML=""}function n(o,s){let g=new URLSearchParams(s);return o(g),window.location.pathname+"?"+g.toString()}function l(o,s){let g=new URLSearchParams(s),d={};g.forEach(function(S,h){d[h]||(d[h]=[]),d[h].push(S)}),o(d);let w=new URLSearchParams;return Object.keys(d).forEach(S=>{d[S].forEach(h=>{w.append(S,h)})}),`${window.location.pathname}?${w.toString()}`}function u(o,s,g){return fetch(o,s).then(d=>g?.(d)??d.text()).then(d=>x(d))}function f(o){o.querySelectorAll("#collection__products > *")?.forEach(s=>{t?.appendChild(s)})}function p(o){t&&(t.parentNode.replaceChild(o,t),t=document.querySelector("#collection__products"))}function _(o){c&&(c.parentNode.replaceChild(o,c),c=document.querySelector(".product_count"))}function F(o){i&&(i.parentNode.replaceChild(o,i),i=document.querySelector("#infinity_point"),U(document.querySelector("#infinity_point")))}function T(o){e&&(e.parentNode.replaceChild(o,e),e=document.querySelector(".paginate"),N(document.querySelectorAll(".paginate_link[data-url]")))}function x(o){let s=document.createElement("div");return s.innerHTML=o,{getElementProduct(){return s.querySelector("#collection__products")},getProductCount(){return s.querySelector(".product_count")},getElementPointInfinity(){return s.querySelector("#infinity_point")},getPaginate(){return s.querySelector(".paginate")}}}return{loading:a,hiddenLoading:r,getApi:u,appendProduct:f,setProduct:p,updateCount:_,updatePointInfinity:F,createUrl:n,updatePaginate:T,createUrlFilter:l}}})();
