(()=>{function v(){function i(t){t.innerHTML="Loading..."}function r(t){t.innerHTML=""}function u(t,e){let l=new URLSearchParams(e);return t(l),window.location.pathname+"?"+l.toString()}function c(t,e){let l=new URLSearchParams(e),m={};l.forEach(function(b,E){m[E]||(m[E]=[]),m[E].push(b)}),t(m);let C=new URLSearchParams;return Object.keys(m).forEach(b=>{m[b].forEach(E=>{C.append(b,E)})}),`${window.location.pathname}?${C.toString()}`}function o(t,e){return t+=t.includes("?")?"&":"?",t+=`section_id=${e}`}function a(t,e){return fetch(t,e).then(l=>l.text()).then(l=>O(l))}function s(t){let e=document.querySelector("#collection__products");t.querySelectorAll("#collection__products > *")?.forEach(l=>{e?.appendChild(l)})}function d(t){let e=document.querySelector("#collection__products");t&&(e.parentNode.replaceChild(t,e),e=t)}function n(t){let e=document.querySelector(".product_count");t&&e.parentNode.replaceChild(t,e)}function f(t){let e=document.querySelector(".collection__toolbar-filter-showing");t&&e.parentNode.replaceChild(t,e)}function p(t,e){let l=document.querySelector("#infinity_point");t&&(l.parentNode.replaceChild(t,l),e(t))}function g(t,e){let l=document.querySelector(".paginate");t&&(l.parentNode.replaceChild(t,l),e(document.querySelectorAll(".paginate_link[data-url]")))}function I(t,e){return fetch(t,e).then(l=>l.text()).then(l=>console.log(l))}function O(t){let e=document.createElement("div");return e.innerHTML=t,{getElementProduct(){return e.querySelector("#collection__products")},getProductCount(){return e.querySelector(".product_count")},getElementPointInfinity(){return e.querySelector("#infinity_point")},getPaginate(){return e.querySelector(".paginate")},getElementShowing(){return e.querySelector(".collection__toolbar-filter-showing")}}}return{loading:i,hiddenLoading:r,getApi:a,appendProduct:s,setProduct:d,updateCount:n,updateShowing:f,updatePointInfinity:p,createUrl:u,updatePaginate:g,createUrlFilter:c,updateUrl:o}}var{loading:R,createUrl:L,hiddenLoading:$,getApi:h,appendProduct:j,setProduct:w,updateCount:U,updateShowing:S,updatePointInfinity:_,updatePaginate:q,createUrlFilter:A,updateUrl:x}=v();function y(i){if(i){let r=new IntersectionObserver(u=>{u.forEach(c=>{if(c.isIntersecting){let o=c.target,a=o.dataset.url,s=o.dataset.sectionId;try{let n=a?L(function(f){f.set("section_id",s)},a.split("?")[1]):null;if(n==null){r.disconnect();return}R(o),h(n).then(f=>{let p=f.getElementPointInfinity();j(f.getElementProduct()),_(p,y),S(f.getElementShowing())}).finally(()=>{$(o)})}catch(d){console.error(d)}}})});r.observe(i)}}function k(i){i&&i.addEventListener("change",r=>{let u=r.target.value,c=r.target.dataset.sectionId;function o(s){s.set("sort_by",u)}let a=L(o,window.location.href.split("?")[1]);history.pushState(null,null,a),a=x(a,c),h(a).then(s=>{w(s.getElementProduct()),_(s.getElementPointInfinity(),y),S(s.getElementShowing())})})}function N(i){i&&i.addEventListener("change",r=>{let u=r.target.value,c=r.target.dataset.sectionId,o=`${window.Shopify.routes.root}cart/update.js`,a={attributes:{items_per_page:u},sections:[c],section_url:location.pathname+location.search},s={method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}};h(o,s).then(()=>{let d=location.pathname;d+=location.search,d+=location.search.includes("?")?"&":"?",d+="section_id="+c,h(d).then(n=>{w(n.getElementProduct()),_(n.getElementPointInfinity(),y),q(n.getPaginate(),P),S(n.getElementShowing())})})})}async function T(i){i&&i.forEach(r=>{r.addEventListener("change",async u=>{let c=u.target.value,o=u.target.name,a=u.target.dataset.sectionId;try{let d=A(function(f){u.target.checked?(f[o]||(f[o]=[]),f[o].push(c)):f[o]&&(f[o]=f[o].filter(p=>p!==c))},window.location.search);history.pushState(null,null,d),d=x(d,a);let n=await h(d);w(n.getElementProduct()),U(n.getProductCount()),q(n.getPaginate(),P),S(n.getElementShowing()),_(n.getElementPointInfinity(),y)}catch(s){console.error(s)}})})}function F(i){if(i){let r={"filter.v.price.gte":0,"filter.v.price.lte":Number.MAX_SAFE_INTEGER};i.forEach(u=>{u.addEventListener("change",c=>{let o=c.target.value,a=c.target.name,s=c.target.dataset.max,d=c.target.dataset.sectionId;r["filter.v.price.lte"]=s,r[a]=o;try{let f=A(function(g){for(let I in r)g[I]=[],g[I].push(r[I])},window.location.search);history.pushState(null,null,f);let p=x(f,d);h(p).then(g=>{w(g.getElementProduct()),U(g.getProductCount()),_(g.getElementPointInfinity(),y),q(g.getPaginate(),P),S(g.getElementShowing())})}catch(n){console.error(n)}})})}}function P(i){i&&i.forEach(r=>{r.addEventListener("click",u=>{let c=u.currentTarget,o=c.dataset.url,a=c.dataset.sectionId;function s(n){n.set("section_id",a)}let d=L(s,o.split("?")[1]);h(d).then(n=>{w(n.getElementProduct()),q(n.getPaginate(),P),S(n.getElementShowing())})})})}M();document.addEventListener("shopify:section:load",M);function M(){let i=document.querySelector("#infinity_point"),r=document.querySelector("#sort_by"),u=document.querySelectorAll('input[type="checkbox"]'),c=document.querySelectorAll('input[type="number"]'),o=document.querySelectorAll(".paginate_link[data-url]"),a=document.querySelector("#show");y(i),k(r),T(u),F(c),P(o),N(a)}})();
